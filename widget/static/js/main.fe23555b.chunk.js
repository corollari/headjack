(window.webpackJsonpwidget=window.webpackJsonpwidget||[]).push([[0],{151:function(e,t,n){var r=n(152),a=n(4),o=a.u,s=a.wallet,i=a.tx,c=n(318),u=c.mapKeys,l=c.snakeCase,p=n(319).BigNumber,m=n(320).ASSET_DECIMALS,d=n(152);function h(e,t){return s.generateSignature(e,t)}function f(e){return u(e,(function(e,t){return l(t)}))}e.exports={signTransaction:function(e,t){return h(new i.InvocationTransaction(e).serialize(!1),t)},signParams:function(e,t){var n=d(e);if(n.length>252)throw new Error("Cannot sign a message more than 252 characters in length");return h(function(e){var t=o.str2hexstring(e),n=o.num2VarInt(t.length/2);return"010001f0".concat(n+t,"0000")}(n),t)},stringifyParams:function(e){var t=f(e);return r(t)},convertHashToUrlParams:function(e){var t=f(e);return Object.keys(t).map((function(e){return function(e,t){return Array.isArray(t)?t.map((function(t){return"".concat(e,"[]=").concat(t)})).join("&"):"".concat(e,"=").concat(t)}(e,t[e])})).join("&")},getTimestamp:function(){return(new Date).getTime()},toAssetAmount:function(e,t){var n=new p(e),r=m[t],a=Math.pow(10,r);return n.times(a).toFixed(0)},signMessage:h,convertKeysToSnakeCase:f,getScriptHashFromAddress:function(e){return s.getScriptHashFromAddress(e)}}},172:function(e){e.exports=JSON.parse('{"common":{"info_requestAcceptance":"This dApp is requesting access to your wallet","info_login":"To continue, log in to NeoLogin.","info_notEnoughFunds":"You don\'t have enough funds. Scan the above QR code to get your address.","info_titleNoFunds":"Insufficient funds","info_or":"or","info_topup":"Top up [SOON]","info_topupTestnet":"Get free Testnet assets","info_send":"This dApp has requested permission to send","info_invoke":"This dApp has requested permission to invoke a smart contract:","warning_invoke":"The amount of GAS or NEO that will be spent on this transaction could not be estimated, please make sure that this is a legitimate transaction","info_signMsg":"This dApp wants to sign a message","info_deploy":"This dApp has requested permission to deploy a smart contract.","info_invokeMulti":"This dApp has requested permission to invoke the following smart contracts:","button_accept":"Accept","button_reject":"Reject","button_continue":"Continue"},"inverse":{"link_language":"\u5207\u6362\u5230\u4e2d\u6587"}}')},173:function(e){e.exports=JSON.parse('{"common":{"info_requestAcceptance":"\u6b64DApp\u6b63\u5728\u8bf7\u6c42\u8bbf\u95ee\u4f60\u7684\u7ebf\u4e0a\u94b1\u5305","info_login":"\u8981\u7ee7\u7eed\uff0c\u8bf7\u767b\u9646NeoLogin","info_notEnoughFunds":"\u4f60\u6ca1\u6709\u8db3\u591f\u7684\u8d44\u4ea7\u3002\u626b\u63cf\u4e0b\u65b9\u7684QR\u7801\u83b7\u53d6\u4f60\u7684\u5730\u5740","info_titleNoFunds":"\u8d44\u4ea7\u4e0d\u8db3","info_or":"\u6216\u8005","info_topup":"\u5145\u503c \uff08\u5373\u5c06\u5f00\u653e\uff09","info_topupTestnet":"\u83b7\u53d6\u514d\u8d39\u6d4b\u8bd5\u7f51\u8d44\u4ea7","info_send":"\u6b64DApp\u5df2\u8bf7\u6c42\u53d1\u9001\u6743\u9650 ","info_invoke":"\u6b64dApp\u5df2\u8bf7\u6c42\u8c03\u7528\u667a\u80fd\u5408\u7ea6\u6743\u9650\u3002","warning_invoke":"\u5c06\u5728\u6b64\u4ea4\u6613\u4e2d\u4f7f\u7528\u7684GAS\u548cNEO\u6570\u989d\u65e0\u6cd5\u4f30\u7b97\uff0c\u8bf7\u786e\u4fdd\u8fd9\u662f\u5408\u6cd5\u7684\u4ea4\u6613\u3002","info_signMsg":"\u6b64dApp\u60f3\u8981\u5bf9\u6d88\u606f\u7b7e\u540d","info_deploy":"\u6b64dApp\u5df2\u8bf7\u6c42\u90e8\u7f72\u667a\u80fd\u5408\u7ea6\u6743\u9650\u3002","info_invokeMulti":"\u6b64dApp\u5df2\u8bf7\u6c42\u8c03\u7528\u4ee5\u4e0b\u667a\u80fd\u5408\u7ea6\u6743\u9650","button_accept":"\u63a5\u53d7","button_reject":"\u62d2\u7edd","button_continue":"\u7ee7\u7eed"},"inverse":{"link_language":"Switch to EN"}}')},177:function(e,t){e.exports={KEYS:{SANDBOX:"d26a9652-7344-4fb6-9421-c3055e044b08"}}},178:function(e,t){e.exports={GEOBLOCKED:["CN","RU","VN","BO","CO","EC","DZ","BD","ID","JO","KG","MA","NP","SA","IR","PK","TW","KH","CU","KP","US"]}},179:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(31),a=n(4),o=16;function s(t){var n=t.recipientPublicKey,s=t.wif,i=t.data,c=Object(r.createECDH)("prime256v1"),u=new a.wallet.Account(s),l=u.privateKey;c.setPrivateKey(l,"hex");var p=e.from(u.publicKey,"hex"),m=c.computeSecret(n,"hex"),d=Object(r.createHash)("sha512").update(m).digest(),h=Object(r.randomBytes)(o),f=d.slice(0,32),g=d.slice(32),v=function(t,n,a){var o=Object(r.createCipheriv)("aes-256-cbc",n,t),s=o.update(a),i=o.final();return e.concat([s,i])}(h,f,i),y=e.concat([h,p,v]),b=Object(r.createHmac)("sha256",g).update(y).digest();return{iv:h.toString("hex"),mac:b.toString("hex"),data:v.toString("hex")}}}).call(this,n(13).Buffer)},180:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n(31),a=n(4);function o(t){var n=t.senderPublicKey,o=t.wif,s=t.iv,i=t.mac,c=t.data,u=Object(r.createECDH)("prime256v1"),l=new a.wallet.Account(o).privateKey;u.setPrivateKey(l,"hex");var p=u.computeSecret(n,"hex"),m=Object(r.createHash)("sha512").update(p).digest(),d=m.slice(0,32),h=m.slice(32),f=e.from(s,"hex"),g=e.from(n,"hex"),v=e.from(c,"hex"),y=e.concat([f,g,v]);if(!Object(r.createHmac)("sha256",h).update(y).digest().equals(e.from(i,"hex")))throw new Error("Bad MAC");return function(t,n,a){var o=Object(r.createDecipheriv)("aes-256-cbc",n,t),s=o.update(a),i=o.final();return e.concat([s,i])}(f,d,v)}}).call(this,n(13).Buffer)},185:function(e,t,n){e.exports=n(390)},190:function(e,t,n){},199:function(e,t,n){},219:function(e,t){},221:function(e,t){},256:function(e,t){},257:function(e,t){},320:function(e,t){e.exports={ASSET_DECIMALS:{NEO:8,GAS:8,SWTH:8,ACAT:8,APH:8,AVA:8,COUP:8,CPX:8,DBC:8,EFX:8,LRN:8,MCT:8,NKN:8,NRVE:8,OBT:8,ONT:8,PKC:8,QLC:8,RHT:0,RPX:8,SDT:8,SDS:8,SOUL:8,TKY:8,TNC:8,TOLL:8,ZPT:8,SWH:8,MCTP:8,NRVEP:8,RHTC:0,ETH:18,ONC:18}}},321:function(e,t){var n={API_URL:"https://api.switcheo.network/v2",CONTRACT_HASH:"a32bcf5d7082f740a4007b16e812cf66a457c3d4"};if(e.exports=n,"<api url>"===n.API_URL||"<contract hash>"===n.CONTRACT_HASH)throw new Error("API_URL and CONTRACT_HASH has not been setup in src/config.js")},322:function(e,t,n){var r=n(142),a=n(151),o=a.stringifyParams,s=a.convertHashToUrlParams;function i(e,t){200===e.status&&(e.body=e.data,t(e))}e.exports={get:function(e,t){return new Promise((function(n){var a=s(t);r.get(e+"?"+a).then((function(e){return i(e,n)})).catch((function(e){return console.log(e.response)}))}))},post:function(e,t){return new Promise((function(n){return r.post(e,o(t),{headers:{"Content-Type":"application/json"}}).then((function(e){return i(e,n)})).catch((function(e){return console.log(e.response)}))}))}}},34:function(e,t,n){},349:function(e,t){},390:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(6),s=n.n(o),i=(n(190),n(96)),c=n(22),u=n(172),l=n(173);i.a.use(c.a).init({resources:{en:u,zh:l},fallbackLng:"en",debug:!0,ns:["common","inverse"],defaultNS:"common",keySeparator:!1,interpolation:{escapeValue:!1}});i.a,n(199);var p=n(32),m=n(2),d=n.n(m),h=n(5),f=n(174),g=n.n(f),v=n(4),y=n.n(v),b="https://neologin.io",E=n(418);n(34);var w=function(e){var t=e.closeWidget,n=e.reqNumber;return a.a.createElement("div",{id:"topBar"},a.a.createElement(E.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{textAlign:"center",padding:"8px 0",background:"#fff"}},a.a.createElement(E.a,{item:!0,xs:1},a.a.createElement(E.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},a.a.createElement(E.a,{item:!0},a.a.createElement("span",{className:"pendingRequestBadge"},1===n?null:n)))),a.a.createElement(E.a,{item:!0,xs:10},a.a.createElement("span",{className:"brand",onClick:function(){return window.open("https://neologin.io")}},"NEO LOGIN")),a.a.createElement(E.a,{item:!0,xs:1},a.a.createElement(E.a,{container:!0,justify:"flex-start",alignItems:"flex-start"},a.a.createElement(E.a,{item:!0},a.a.createElement("span",{className:"closeButton",onClick:function(){return t()}},"\u2716"))))))};var x=Object(c.b)()((function(e){var t=e.closeWidget,n=e.t,r=e.i18n;return a.a.createElement("div",null,a.a.createElement(w,{closeWidget:function(){t(),s.a.unmountComponentAtNode(window.document.getElementById("content"))}}),a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100%",padding:"1em"}},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("p",{style:{fontSize:"0.85em"}},n("info_login"))),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement("button",{className:"buttonContinue",onClick:function(){window.open(b.includes("localhost")?b:b+"/login/","NeoLogin - Login","width=400,height=660")}},n("button_continue"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("span",{className:"cursorOnHover",variant:"body2",onClick:function(){return r.changeLanguage("zh"===r.language?"en":"zh")}},a.a.createElement("p",{style:{color:"#2e5aac",marginBottom:"0"}},n("inverse:link_language"))))))})),k=n(14),A=n(11),C=n(17),O=n(18),j=n(19),S=n(423),I={type:"CONNECTION_DENIED",description:"The user rejected the request to connect with your dApp."},N=function(e){function t(){var e,n;Object(k.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(C.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).unmountComponent=function(){s.a.unmountComponentAtNode(window.document.getElementById(n.props.contid))},n}return Object(j.a)(t,e),Object(A.a)(t,[{key:"componentWillUnmount",value:function(){window.document.getElementById(this.props.contid).remove(),this.props.closeRequest(),this.props.closeWidget()}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,r=t.i18n;return a.a.createElement("div",null,a.a.createElement(w,{closeWidget:function(){e.props.reject(I),e.unmountComponent()},reqNumber:parseInt(this.props.contid.split("-")[1])+1}),a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100%",padding:"1em"}},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("p",{style:{fontSize:"0.85em"}},n("info_requestAcceptance"))),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement(E.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonAccept",onClick:function(){e.props.resolve("resolveincomponent"),e.unmountComponent()}},n("button_accept"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonReject",onClick:function(){e.props.reject(I),e.unmountComponent()}},n("button_reject"))))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement(S.a,{href:"#",variant:"body2",onClick:function(){return r.changeLanguage("zh"===r.language?"en":"zh")}},a.a.createElement("p",{style:{color:"#2e5aac",marginBottom:"0"}},n("inverse:link_language"))))))}}]),t}(a.a.Component),P=Object(c.b)()(N),_=function(e){function t(){var e,n;Object(k.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(C.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).unmountComponent=function(){s.a.unmountComponentAtNode(window.document.getElementById(n.props.contid))},n}return Object(j.a)(t,e),Object(A.a)(t,[{key:"componentWillUnmount",value:function(){window.document.getElementById(this.props.contid).remove(),this.props.closeRequest(),this.props.closeWidget()}},{key:"render",value:function(){var e=this,t=this.props.t;return a.a.createElement("div",null,a.a.createElement(w,{closeWidget:function(){e.props.reject(),e.unmountComponent()},reqNumber:parseInt(this.props.contid.split("-")[1])+1}),a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100%",padding:"1em"}},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("p",{style:{fontSize:"0.85em"}},t("info_send"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("span",{style:{fontWeight:"bold"}},this.props.sendArgs.amount," ",this.props.sendArgs.asset)),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"flex-start",style:{padding:"1em"}},a.a.createElement("div",null,a.a.createElement("span",{style:{fontSize:"0.85em",display:"block"}},"Network: ",this.props.sendArgs.network),a.a.createElement("span",{style:{fontSize:"0.85em"}},"To: "),a.a.createElement("span",{style:{fontSize:"0.80em"}},this.props.sendArgs.toAddress),a.a.createElement("span",{style:{fontSize:"0.85em",display:"block"}},"Fee: ",this.props.sendArgs.fee||0," GAS")))),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement(E.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonAccept",onClick:function(){e.props.resolve("resolveincomponent"),e.unmountComponent()}},t("button_accept"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonReject",onClick:function(){e.props.reject(),e.unmountComponent()}},t("button_reject")))))))}}]),t}(a.a.Component),T=Object(c.b)()(_),B=function(e){function t(){var e,n;Object(k.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(C.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).unmountComponent=function(){s.a.unmountComponentAtNode(window.document.getElementById(n.props.contid))},n}return Object(j.a)(t,e),Object(A.a)(t,[{key:"componentWillUnmount",value:function(){window.document.getElementById(this.props.contid).remove(),this.props.closeRequest(),this.props.closeWidget()}},{key:"render",value:function(){var e=this,t=this.props.t;return a.a.createElement("div",null,a.a.createElement(w,{closeWidget:function(){e.props.reject(),e.unmountComponent()},reqNumber:parseInt(this.props.contid.split("-")[1])+1}),a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100%",padding:"1em"}},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("p",{style:{fontSize:"0.85em"}},t("info_signMsg"))),a.a.createElement(E.a,{item:!0,xs:!0,style:{padding:"1rem",background:"whitesmoke",width:"100%",marginBottom:"1rem"}},a.a.createElement("span",null,this.props.message)),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement(E.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonAccept",onClick:function(){e.props.resolve("resolveincomponent"),e.unmountComponent()}},t("button_accept"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonReject",onClick:function(){e.props.reject(),e.unmountComponent()}},t("button_reject")))))))}}]),t}(a.a.Component),R=Object(c.b)()(B),H=n(176),M=function(e){function t(){var e,n;Object(k.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(C.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).unmountComponent=function(){s.a.unmountComponentAtNode(window.document.getElementById(n.props.contid))},n}return Object(j.a)(t,e),Object(A.a)(t,[{key:"componentWillUnmount",value:function(){window.document.getElementById(this.props.contid).remove(),this.props.closeRequest(),this.props.closeWidget()}},{key:"render",value:function(){var e=this,t=this.props.t;return a.a.createElement("div",null,a.a.createElement(w,{closeWidget:function(){e.props.reject(),e.unmountComponent()},reqNumber:parseInt(this.props.contid.split("-")[1])+1}),a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100%",padding:"1em"}},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("p",{style:{fontSize:"0.85em"}},t("info_invoke"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("span",{style:{fontSize:"0.75em"}},this.props.invokeArgs.scriptHash)),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"flex-start",style:{padding:"1em"}},a.a.createElement("div",null,a.a.createElement("span",{style:{fontSize:"0.85em",display:"block"}},"Network: ",this.props.network),this.props.goodEstimation?a.a.createElement("span",{style:{fontSize:"0.85em",display:"block",color:"#B33A3A"}},t("warning_invoke")):(void 0!==this.props.invokeArgs.attachedAssets?["NEO","GAS"].map((function(t,n){return e.props.invokeArgs.attachedAssets[t]?a.a.createElement("span",{key:n,style:{fontSize:"0.85em",display:"block"}},"Amount: ",e.props.invokeArgs.attachedAssets[t]," ",t):null})):[]).concat(a.a.createElement("span",{style:{fontSize:"0.85em",display:"block"}},"Fee: ",this.props.invokeArgs.fee||0," GAS"))))),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement(E.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonAccept",onClick:function(){e.props.resolve("resolveincomponent"),e.unmountComponent()}},t("button_accept"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonReject",onClick:function(){e.props.reject(),e.unmountComponent()}},t("button_reject")))))))}}]),t}(a.a.Component),W=Object(c.b)()(M),D=function(e){function t(){var e,n;Object(k.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(C.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).unmountComponent=function(){s.a.unmountComponentAtNode(window.document.getElementById(n.props.contid))},n}return Object(j.a)(t,e),Object(A.a)(t,[{key:"componentWillUnmount",value:function(){window.document.getElementById(this.props.contid).remove(),this.props.closeRequest(),this.props.closeWidget()}},{key:"render",value:function(){var e=this,t=this.props.t;return a.a.createElement("div",null,a.a.createElement(w,{closeWidget:function(){e.props.reject(),e.unmountComponent()},reqNumber:parseInt(this.props.contid.split("-")[1])+1}),a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100%",padding:"1em"}},a.a.createElement(E.a,{item:!0,xs:!0,style:{textAlign:"center"}},a.a.createElement("p",{style:{fontSize:"0.85em"}},t("info_deploy"))),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"flex-start",style:{padding:"1em"}},a.a.createElement("div",null,a.a.createElement("span",{style:{fontSize:"0.85em",display:"block"}},"Network: ",this.props.deployArgs.network),a.a.createElement("span",{style:{fontSize:"0.85em",display:"block"}},"System cost: ",this.props.sysGasFee," GAS"),a.a.createElement("span",{style:{fontSize:"0.85em",display:"block"}},"Fee: ",this.props.deployArgs.networkFee," GAS")))),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement(E.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonAccept",onClick:function(){e.props.resolve("resolveincomponent"),e.unmountComponent()}},t("button_accept"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonReject",onClick:function(){e.props.reject(),e.unmountComponent()}},t("button_reject")))))))}}]),t}(a.a.Component),F=Object(c.b)()(D),q=n(421),K=n(25),L=n(422),U={key:"ebde522b32164eb1b3a5b262ea75c2af",secret:"607f430eb783a1e7c2948c8ce9fd7e4b06463b1300cf72524357be0eabc2152c"},z=n(31),G="https://api.changelly.com";function V(e,t){return{id:"test",jsonrpc:"2.0",method:e,params:t}}function Y(e){return z.createHmac("sha512",U.secret).update(JSON.stringify(e)).digest("hex")}function J(e,t){return $.apply(this,arguments)}function $(){return($=Object(h.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(G,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json","api-key":U.key,sign:n}});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(h.a)(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=V("getExchangeAmount",[{from:"eth",to:"gas",amount:t}]),r=Y(n),e.next=4,J(n,r);case 4:return a=e.sent,e.abrupt("return",a.result[0].rate);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(h.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=V("createTransaction",{from:"eth",to:"gas",address:t,amount:String(n)}),a=Y(r),e.next=4,J(r,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=n(177),ne=n(142),re="https://api.carbon.money",ae="";function oe(){return se.apply(this,arguments)}function se(){return(se=Object(h.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(re,"/v1/users/returnJWT?apikey=").concat(te.KEYS.SANDBOX),e.next=3,fetch(t,{method:"GET"});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,ae=r.jwtToken,console.log(ae);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(h.a)(d.a.mark((function e(t){var n,r,a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(re,"/v1/contacts/create"),r={publicKey:t},a={headers:{Authorization:"Bearer ".concat(ae)}},e.next=5,ne.post(n,r,a);case 5:return o=e.sent,e.abrupt("return",o.data.details.contactId);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return le.apply(this,arguments)}function le(){return(le=Object(h.a)(d.a.mark((function e(t){var n,r,a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(re,"/v1/contacts/query?publicKey=").concat(t),r={headers:{Authorization:"Bearer ".concat(ae)}},e.next=4,ne.get(n,r);case 4:return a=e.sent,console.log("result.data",a.data),o=a.data.details.remainingWeeklyLimit/100,e.abrupt("return",{contactId:a.data.contactId,remainingWeeklyLimit:o});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e){return me.apply(this,arguments)}function me(){return(me=Object(h.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:return e.prev=2,e.next=5,ue(t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),e.next=13,ie(t);case 13:return r=e.sent,e.abrupt("return",{contactId:r});case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function de(e){return he.apply(this,arguments)}function he(){return(he=Object(h.a)(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:"Bearer ".concat(ae)}},r="".concat(re,"/v1/card?contactId=").concat(t),console.log(r),e.prev=3,e.next=6,ne.get(r,n);case 6:return a=e.sent,console.log("creditcard",a),e.abrupt("return",a.data.details);case 11:return e.prev=11,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function fe(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(h.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(re,"/v1/rates?cryptocurrencyArray=eth&fiatBaseCurrency=usd&fiatChargeAmount=").concat(t,";"),e.next=3,ne.get(n);case 3:return r=e.sent,e.abrupt("return",r.data.eth["usd/eth"]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e,t,n,r,a,o){return ye.apply(this,arguments)}function ye(){return(ye=Object(h.a)(d.a.mark((function e(t,n,r,a,o,s){var i,c,u,l,p,m,h,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.substr(n.length-4),e.next=3,de(s);case 3:if(c=e.sent,u=-1,(l=c.some((function(e){var t=e.cardNumber.substr(e.cardNumber.length-4);return u+=1,t===i})))?console.log("some!!!"):console.log("noooooo some!!!"),!l){e.next=9;break}return e.abrupt("return",c.length?c[u].creditDebitId:c.creditDebitId);case 9:return console.log("addCreditCard",s),p={headers:{Authorization:"Bearer ".concat(ae)}},m="".concat(re,"/v1/card/addNew"),h={nameOnCard:t,cardNumber:n,expiry:r,cvc:a,billingPremise:o.card_billingPremise,billingStreet:o.card_billingStreet,billingPostal:o.card_billingPostal,contactId:s,rememberMe:"true",fiatBaseCurrency:"USD"},e.next=15,ne.post(m,h,p);case 15:return f=e.sent,e.abrupt("return",f.data.details.creditDebitId);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t,n,r,a,o,s,i,c){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(h.a)(d.a.mark((function e(t,n,r,a,o,s,i,c,u){var l,p,m,h,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="".concat(re,"/v1/card/charge3d"),p={headers:{Authorization:"Bearer ".concat(ae)}},m=parseFloat(100*r)+"",h={creditDebitId:n,fiatChargeAmount:m,cryptocurrencySymbol:"eth",receiveAddress:a,successRedirectUrl:"http://localhost:3002/?success=true&neoAddr=".concat(u,"&asset=").concat(c,"&actualBalance=").concat(s,"&from=").concat(a,"&to=").concat(o,"&value=").concat(i,"&contactId=").concat(t),errorRedirectUrl:"http://localhost:3002/?success=false&contactId=".concat(t),contactId:t},e.prev=4,e.next=7,ne.post(l,h,p);case 7:return f=e.sent,e.abrupt("return",f.data);case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}var we=n(95),xe=n.n(we),ke={ifura:"d0a754583ab1433c8db90a67bcec1b09"};function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(n,!0).forEach((function(t){Object(K.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=n(151),je=Oe.getTimestamp,Se=Oe.signParams,Ie=Oe.signTransaction,Ne=Oe.toAssetAmount,Pe=Oe.getScriptHashFromAddress,_e=n(321),Te=_e.API_URL,Be=_e.CONTRACT_HASH,Re=n(322);n(323);function He(e){var t={pair:e};return Re.get("https://api.switcheo.network/v2/offers/book",t).then((function(e){return e.body}))}function Me(e){var t={addresses:e.addresses,contract_hashes:[Be]};return Re.get(Te+"/balances",t)}function We(e){return new Promise((function(t){return setTimeout(t,1e3*e)}))}function De(e){var t=e.pair,n=e.blockchain,r=e.side,a=e.price,o=e.quantity,s=e.useNativeTokens,i=e.orderType,c=e.privateKey,u=e.address,l={pair:t,blockchain:n,side:r,price:a,quantity:Ne(o,"GAS"),use_native_tokens:s,order_type:i,timestamp:je(),contract_hash:Be},p=Ce({},l,{address:u,signature:Se(l,c)});return Re.post(Te+"/orders",p).then((function(e){return e.body}))}function Fe(e,t){return e.reduce((function(e,n){return e[n.id]=Ie(n.txn,t),e}),{})}function qe(e){var t=e.order,n=e.privateKey,r=(t.fills,t.makes,{fills:Fe(t.fills,n),makes:Fe(t.makes,n)}),a="".concat(Te,"/orders/").concat(t.id,"/broadcast");return Re.post(a,{signatures:r})}function Ke(e){var t=e.blockchain,n=e.address,r=e.asset_id,a=e.amount,o=e.privateKey,s={blockchain:t,asset_id:r,amount:a,contract_hash:Be,timestamp:je()},i=Ce({},s,{address:n,signature:Se(s,o)});return Re.post(Te+"/withdrawals",i)}function Le(e){var t=e.withdrawal,n=e.privateKey,r={id:t.id,timestamp:je()},a=Se(r,n),o="".concat(Te,"/withdrawals/").concat(t.id,"/broadcast");return Re.post(o,Ce({},r,{signature:a}))}function Ue(e,t,n,r){return ze.apply(this,arguments)}function ze(){return(ze=Object(h.a)(d.a.mark((function e(t,n,r,a){var o,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke({blockchain:"neo",address:t,asset_id:a,amount:r,privateKey:n});case 2:return o=e.sent,e.next=5,Le({withdrawal:o,privateKey:n});case 5:return e.next=7,Me({addresses:[t]});case 7:e.t0=a,s=e.sent.body.confirmed[e.t0],i=s;case 10:if(i!=s){e.next=19;break}return e.next=13,We(.5);case 13:return e.next=15,Me({addresses:[t]});case 15:e.t1=a,i=e.sent.body.confirmed[e.t1],e.next=10;break;case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e,t,n){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(h.a)(d.a.mark((function e(t,n,r){var a,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De({pair:"GAS_NEO",blockchain:"neo",address:t,side:"sell",price:null,quantity:r,useNativeTokens:!1,orderType:"market",privateKey:n});case 2:return a=e.sent,e.next=5,qe({order:a,privateKey:n});case 5:return o=e.sent.data.want_amount,e.next=8,Me({addresses:[t]});case 8:s=(s=e.sent.body.confirmed.NEO)||0;case 10:if(!(s<r)){e.next=18;break}return e.next=13,We(.5);case 13:return e.next=15,Me({addresses:[t]});case 15:s=e.sent.body.confirmed.NEO,e.next=10;break;case 18:return e.abrupt("return",Number(o)/2);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,t,n){return Je.apply(this,arguments)}function Je(){return(Je=Object(h.a)(d.a.mark((function e(t,n,r){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Pe(t),console.log("depositing gas..."),console.log("trading..."),e.next=5,Ge(t,n,r);case 5:return e.t0=e.sent,e.t1=Math.pow(10,8),a=e.t0%e.t1,console.log("withdrawing..."),e.next=11,Ue(t,n,a,"NEO");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(352).Transaction;function $e(e,t,n){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(h.a)(d.a.mark((function e(t,n,r){var a,o,s,i,c,u,l,p,m,h,f,g;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=0,"NEO"!==n){e.next=7;break}return e.next=4,Qe(t);case 4:o=e.sent,t=o.totalGAS,a=et(t,o.averageNEOPrice);case 7:return e.next=9,X(.1);case 9:return s=e.sent,e.next=12,fe();case 12:return i=e.sent,u=(c=t/(.98*s))*i,e.next=17,tt.eth.getGasPrice();case 17:return l=e.sent,p=21e3*l*3,m=tt.utils.fromWei(String(p),"ether"),g=u>=5,f=(f=u+(h=(.03*u>2?.03*u:2)+m/i+.1/s*i+a)).toFixed(2),h=h.toFixed(2),u=u.toFixed(2),e.abrupt("return",{fiatChargeAmount:f,priceInUSD:u,totalFee:h,minAmountOK:g,id:r,ethAmount2Buy:c});case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(h.a)(d.a.mark((function e(t){var n,r,a,o,s,i,c,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He("GAS_NEO");case 2:for(n=e.sent.bids,r=0,a=0,o=t,s=0,i=0,c=0;o>0&&c<n.length;)a=n[c].quantity,r=n[c].price,o<=(u=r*a)?(s+=o/r,i+=r*o):(s+=u/r,i+=r*u),o-=u,c++;return s=Math.trunc(1e3*s)/1e3+.001,l=parseFloat(t)?Math.round(i/t*1e3)/1e3:0,e.abrupt("return",{totalGAS:s,averageNEOPrice:l});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t){return.002*e*t}var tt=new xe.a(new xe.a.providers.HttpProvider("https://mainnet.infura.io/v3/"+ke.ifura));function nt(){return(nt=Object(h.a)(d.a.mark((function e(t,n,r){var a,o,s,i,c,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(t);case 2:return a=e.sent,o=a.contactId,p=n,s=tt.eth.accounts.privateKeyToAccount(p).address,e.next=7,Z(s,r);case 7:return i=e.sent,c=i.result.payinAddress,u=i.result.amountExpectedFrom,l=i.result.amountExpectedTo,e.abrupt("return",{amountExpectedTo:l,payinAddress:c,contactId:o,ethAddress:s,amountExpectedFrom:u,remainingWeeklyLimit:a.remainingWeeklyLimit});case 12:case"end":return e.stop()}var p}),e)})))).apply(this,arguments)}function rt(){return(rt=Object(h.a)(d.a.mark((function e(t,n,r,a,o,s,i,c){var u,l,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(o.card_fullName,o.card_number,o.card_expiry,o.card_cvc,o.creditCardBillingInfo,t);case 2:return u=e.sent,e.next=5,ot(r);case 5:return l=e.sent,e.next=8,be(t,u,n,r,a,l,s,i,c);case 8:if("Y"===(p=e.sent).charge3denrolled||0===p.errorcode){e.next=13;break}return e.abrupt("return",Promise.reject(p));case 13:return e.abrupt("return",p);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e,t,n,r,a,o,s,i,c){var u=setInterval(Object(h.a)(d.a.mark((function l(){var p;return d.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,ot(t);case 2:if(p=l.sent,!(o<p)){l.next=13;break}return clearInterval(u),l.prev=5,l.next=8,it(e,t,n,r,a,s,i,c);case 8:l.next=13;break;case 10:return l.prev=10,l.t0=l.catch(5),l.abrupt("return",c());case 13:case"end":return l.stop()}}),l,null,[[5,10]])}))),2e3)}function ot(e){return st.apply(this,arguments)}function st(){return(st=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){tt.eth.getBalance(t,function(){var t=Object(h.a)(d.a.mark((function t(r,a){var o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r?n(r):(o=tt.utils.fromWei(a,"ether"),e(o));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t,n,r,a,o,s,i){return ct.apply(this,arguments)}function ct(){return(ct=Object(h.a)(d.a.mark((function e(t,n,r,a,o,s,i,c){var u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=localStorage.getItem("privkey"),console.log(t,u,o),e.next=4,Ye(t,u,o);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(C.a)(this,Object(O.a)(t).call(this,e))).createIframe3DS=function(){var e=document.createElement("iframe");e.style.width="100%",e.style.height="100%",e.style.border="0",e.id="iframe3ds",e.onLoad="alert('Test');";var t="\n        <form style={{width:'100%', height='100%'}}name=\"form\" id=\"form\" action=".concat(n.state.acsurl,' method="POST">\n        <input type="hidden" name="PaReq" value=').concat(n.state.pareq,' />\n        <input type="hidden" name="TermUrl" value=').concat(n.state.termurl,' />\n        <input type="hidden" name="MD" value=').concat(n.state.md,' />\n        <p>You will be redirected to 3DS</p>\n        <button type="submit" id="completePayment">Complete payment</button>\n        </form>\n        <script>\n        function submitt() {\n        document.getElementById(\'form\').submit()\n        }\n        <\/script>\n        ');document.getElementById("3dsContainer").appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.write(t),e.contentWindow.document.close(),setTimeout((function(){document.getElementById("iframe3ds").contentWindow.submitt()}),1)},n.state={acsurl:n.props.acsurl,pareq:n.props.pareq,termurl:n.props.termurl,md:n.props.md,height:438},n}return Object(j.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=400+document.getElementById("topBar").offsetHeight;this.setState({height:"".concat(e,"px")}),this.createIframe3DS()}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"3dsContainer",style:{height:this.state.height}}))}}]),t}(a.a.Component),lt=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(C.a)(this,Object(O.a)(t).call(this,e))).handleChange=function(e){var t=e.target,r=t.name,a=t.value;n.setState(Object(K.a)({},r,a)),"amount"===r?n.calculatePrice(a,n.state.asset):"asset"===r&&n.calculatePrice(n.state.amount,a)},n.calculatePrice=function(e,t){var r=n.state.reqCalculatePriceCount+1;n.setState({reqCalculatePriceCount:r},Object(h.a)(d.a.mark((function a(){var o;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,$e(e,t,r);case 3:(o=a.sent).id==n.state.reqCalculatePriceCount&&n.state.reqCalculatePriceCount&&n.setState({fiatChargeAmount:o.fiatChargeAmount,totalFee:o.totalFee,priceInUSD:o.priceInUSD,reqCalculatePriceCount:0,minAmountOK:o.minAmountOK,ethAmount2Buy:o.ethAmount2Buy}),console.log("llega"),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("llega"),n.setState({cardError:!0,errorMsg:"Error calculating prices.",reqCalculatePriceCount:0});case 12:case"end":return a.stop()}}),a,null,[[0,8]])}))))},n.buy=function(){n.setState({ccViewIsLoading:!0,ccView:!0}),function(e,t,n){return nt.apply(this,arguments)}(n.props.addr,n.props.privkey,n.state.ethAmount2Buy).then((function(e){n.setState({contactId:e.contactId,ethAddress:e.address,payinAddress:e.payinAddress,ccViewIsLoading:!1,remainingWeeklyLimit:e.remainingWeeklyLimit,amountExpectedFrom:e.amountExpectedFrom}),e.remainingWeeklyLimit<n.state.fiatChargeAmount&&n.setState({cardError:!0,errorMsg:"The amount you are trying to buy exceeds you remaining dialy limit: ".concat(e.remainingWeeklyLimit,"$")}),n.state.disableConfirmButton&&n.postCreditCard()}))},n.confirmCreditCard=function(){n.setState({disableConfirmButton:!0}),n.state.contactId&&n.postCreditCard()},n.postCreditCard=function(){var e={creditCardBillingInfo:{card_billingPremise:n.state.card_billingPremise,card_billingStreet:n.state.card_billingStreet,card_billingPostal:n.state.card_billingPostal},card_number:n.state.card_number,card_expiry:n.state.card_expiry,card_cvc:n.state.card_cvc,card_fullName:n.state.card_fullName},t=n.state.ethAddress;(function(e,t,n,r,a,o,s,i){return rt.apply(this,arguments)})(n.state.contactId,n.state.fiatChargeAmount,t,n.state.payinAddress,e,n.state.amountExpectedFrom,n.state.asset,n.props.neoAddr).then((function(e){n.setState({activateACS:!0,acsurl:e.acsurl,pareq:e.pareq,termurl:e.termurl,md:e.md})})).catch((function(e){console.log(e),n.setState({disableConfirmButton:!1}),n.state.cardError||n.setState({cardError:!0,errorMsg:"Something went wrong:/ Try with another credit card."})}))},n.state={asset:n.props.asset,ethAddress:0,payinAddress:0,contactId:null,ccView:!1,totalFee:0,amount:n.props.amount,fiatChargeAmount:0,reqCalculatePriceCount:0,priceInUSD:0,minAmountOK:!0,ccViewIsLoading:!1,cardError:!1,activateStatusScreen:!1,disableConfirmButton:!1,blocked:!1},n}return Object(j.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){this.calculatePrice(this.state.amount,this.state.asset)}},{key:"render",value:function(){var e=this;return this.state.activateACS&&!this.state.ccViewIsLoading?a.a.createElement(ut,{onSubmit:function(){return e.setState({activateStatusScreen:!0})},acsurl:this.state.acsurl,pareq:this.state.pareq,termurl:this.state.termurl,md:this.state.md}):this.state.ccView?a.a.createElement("div",null,a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100%",padding:"1em"}},a.a.createElement(E.a,{item:!0},a.a.createElement("p",{style:{fontWeight:"bold",marginTop:"0"}},"Transaction info")),a.a.createElement(E.a,{item:!0,style:{padding:"1rem",background:"whitesmoke",width:"100%",marginBottom:"1rem"}},a.a.createElement("p",{style:{fontSize:"0.75rem"}},"Asset: ",this.state.asset),a.a.createElement("p",{style:{fontSize:"0.75rem"}},"Destination address: ",this.props.addr),a.a.createElement("p",{style:{fontSize:"0.75rem"}},"Amount requested: ",this.state.amount," ",this.state.asset),a.a.createElement("p",{style:{fontSize:"0.75rem"}},"Price: ",this.state.priceInUSD,"$"),a.a.createElement("p",{style:{fontSize:"0.75rem"}},"Fee: ",this.state.totalFee,"$"),a.a.createElement("p",{style:{fontSize:"0.75rem"}},"Total to pay: ",this.state.fiatChargeAmount,"$")),a.a.createElement(E.a,{item:!0},a.a.createElement("p",{style:{fontWeight:"bold",marginTop:"0"}},"Payment info")),a.a.createElement(E.a,{item:!0},a.a.createElement(E.a,{container:!0,spacing:1,direction:"row",justify:"center",alignItems:"center"},a.a.createElement(E.a,{item:!0,xs:6},a.a.createElement("input",{className:"inputCC",placeholder:"Card number",id:"standard-name",label:"Card number",margin:"normal",name:"card_number",onChange:this.handleChange})),a.a.createElement(E.a,{item:!0,xs:6},a.a.createElement("input",{className:"inputCC",placeholder:"Billing premise",id:"standard-name",label:"Premise",margin:"normal",name:"card_billingPremise",onChange:this.handleChange})),a.a.createElement(E.a,{item:!0,xs:6},a.a.createElement("input",{className:"inputCC",placeholder:"MM/YY",id:"standard-name",label:"MM/YY",margin:"normal",name:"card_expiry",onChange:this.handleChange})),a.a.createElement(E.a,{item:!0,xs:6},a.a.createElement("input",{className:"inputCC",placeholder:"Billing street",id:"standard-name",label:"Street",margin:"normal",name:"card_billingStreet",onChange:this.handleChange})),a.a.createElement(E.a,{item:!0,xs:6},a.a.createElement("input",{className:"inputCC",placeholder:"CVC",id:"standard-name",label:"CVC",margin:"normal",name:"card_cvc",onChange:this.handleChange})),a.a.createElement(E.a,{item:!0,xs:6},a.a.createElement("input",{className:"inputCC",placeholder:"Billing postal",id:"standard-name",label:"Postal code",margin:"normal",name:"card_billingPostal",onChange:this.handleChange})),a.a.createElement(E.a,{item:!0,xs:6},a.a.createElement("input",{className:"inputCC",placeholder:"Full name",id:"standard-name",label:"Full name",margin:"normal",name:"card_fullName",onChange:this.handleChange})))),this.state.cardError?a.a.createElement(E.a,{item:!0},a.a.createElement("p",{style:{color:"darkred",fontSize:"0.75rem"}},this.state.errorMsg)):null,a.a.createElement(E.a,{item:!0},this.state.disableConfirmButton?null:a.a.createElement("span",{onClick:function(){return e.setState({ccView:!1})},className:"backtext"},"Back"),a.a.createElement("button",{className:"buttonBuy",disabled:this.state.disableConfirmButton,onClick:function(){return e.confirmCreditCard()}},this.state.disableConfirmButton?"Creating transaction...":"Confirm")))):a.a.createElement("div",null,a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100%",padding:"1em"}},a.a.createElement(E.a,{item:!0},a.a.createElement("p",{style:{fontWeight:"bold",marginTop:"0"}},"Buy assets")),a.a.createElement(E.a,{item:!0},a.a.createElement("select",{name:"asset",id:"currency",onChange:this.handleChange},a.a.createElement("option",{value:"GAS"},"GAS"),a.a.createElement("option",{value:"NEO"},"NEO"))),a.a.createElement(E.a,{item:!0},a.a.createElement(L.a,{id:"standard-name",label:"Amount",type:"Number",margin:"normal",name:"amount",value:this.state.amount,onChange:this.handleChange,variant:"outlined",InputProps:{inputProps:{min:0}},error:!this.state.minAmountOK||null,helperText:this.state.minAmountOK?"":"You are below the minimum required"})),a.a.createElement(E.a,{item:!0},this.state.reqCalculatePriceCount?a.a.createElement("p",null,"Loading price..."):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"You pay ",this.state.priceInUSD,"$ (+Fee: ",this.state.totalFee,"$)"),a.a.createElement("p",null,"Total: ",this.state.fiatChargeAmount,"$"))),!this.state.reqCalculatePriceCount&&this.state.minAmountOK?a.a.createElement(E.a,{item:!0},a.a.createElement("button",{className:"buttonBuy",disabled:!this.state.amount,onClick:this.buy},"Buy")):null))}}]),t}(a.a.Component),pt=n(178),mt=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(C.a)(this,Object(O.a)(t).call(this,e))).unmountComponent=function(){s.a.unmountComponentAtNode(window.document.getElementById(n.props.contid))},n.state={wantsDeposit:!1,geoBlocked:!0},n}return Object(j.a)(t,e),Object(A.a)(t,[{key:"componentWillMount",value:function(){var e=this;fetch("https://ipapi.co/json/").then((function(e){return e.json()})).then((function(t){var n=t.country,r=pt.GEOBLOCKED.indexOf(n)>-1;e.setState({geoBlocked:r})})).catch((function(e){console.log(e)}))}},{key:"componentWillUnmount",value:function(){window.document.getElementById(this.props.contid).remove(),this.props.closeRequest(),this.props.closeWidget()}},{key:"render",value:function(){var e=this,t=this.props.t;return a.a.createElement(a.a.Fragment,null,a.a.createElement(w,{closeWidget:function(){e.props.reject(),e.unmountComponent()},reqNumber:parseInt(this.props.contid.split("-")[1])+1}),this.state.wantsDeposit?this.state.geoBlocked?null:a.a.createElement(lt,{neoAddr:this.props.address,amount:this.props.amount,asset:this.props.asset,privkey:this.props.privkey,addr:this.props.address}):a.a.createElement("div",null,a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100%",padding:"1em"}},a.a.createElement(E.a,{item:!0},a.a.createElement("p",{style:{fontWeight:"bold",marginTop:"0"}},t("info_titleNoFunds"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("img",{alt:"address",style:{height:"150px"},src:"https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl="+this.props.address+"&chld=L|0"})),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("span",{style:{fontSize:"0.85em"}},this.props.address)),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("p",{style:{fontSize:"0.85em"}},t("info_notEnoughFunds"))),a.a.createElement(E.a,{item:!0,style:{width:"100%",marginBottom:"15px"}},a.a.createElement(E.a,{container:!0,direction:"row",alignItems:"center",justify:"center",style:{width:"100%",textAlign:"center"}},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement(q.a,null)),a.a.createElement(E.a,{item:!0},a.a.createElement("span",{style:{margin:"0px 10px"}},t("info_or"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement(q.a,null)))),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement("button",{className:"buttonContinue",onClick:function(){console.log(e.props.network),"MainNet"===e.props.network?e.setState({wantsDeposit:!1}):window.open("https://neowish.ngd.network/","_blank")}},"MainNet"===this.props.network?t("info_topup"):t("info_topupTestnet"))))))}}]),t}(a.a.Component),dt=Object(c.b)()(mt),ht=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(C.a)(this,Object(O.a)(t).call(this,e))).unmountComponent=function(){s.a.unmountComponentAtNode(window.document.getElementById(n.props.contid))},n.state={currentContract:e.invokeMultiArgs.invokeArgs[0],totalContracts:e.invokeMultiArgs.invokeArgs.length,actualIndex:0},n}return Object(j.a)(t,e),Object(A.a)(t,[{key:"componentWillUnmount",value:function(){window.document.getElementById(this.props.contid).remove(),this.props.closeRequest(),this.props.closeWidget()}},{key:"componentDidUpdate",value:function(){this.props.updateWidgetHeight(document.getElementById(this.props.contid).clientHeight)}},{key:"render",value:function(){var e=this,t=this.props.t;return a.a.createElement("div",null,a.a.createElement(w,{closeWidget:function(){e.props.reject(),e.unmountComponent()},reqNumber:parseInt(this.props.contid.split("-")[1])+1}),a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100%",padding:"1em"}},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("p",{style:{fontSize:"0.85em"}},t("info_invokeMulti"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement(E.a,{container:!0,direction:"row"},a.a.createElement(E.a,{item:!0,onClick:function(){0!==e.state.actualIndex&&e.setState({actualIndex:e.state.actualIndex-1})},style:{transform:"translateY(-4px)",cursor:0===this.state.actualIndex?"default":"pointer",opacity:0===this.state.actualIndex?"0.2":"1"}},"\ud83e\udc60"),a.a.createElement(E.a,{item:!0,style:{margin:"0px 14px"}},a.a.createElement("span",null,this.state.actualIndex+1," / ",this.state.totalContracts)),a.a.createElement(E.a,{item:!0,onClick:function(){e.state.actualIndex!==e.state.totalContracts-1&&e.setState({actualIndex:e.state.actualIndex+1})},style:{transform:"translateY(-4px)",cursor:this.state.actualIndex===this.state.totalContracts-1?"default":"pointer",opacity:this.state.actualIndex===this.state.totalContracts-1?"0.2":"1"}},"\ud83e\udc62"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("span",{style:{fontSize:"0.75em"}},this.props.invokeMultiArgs.invokeArgs[this.state.actualIndex].scriptHash)),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"flex-start",style:{padding:"1em"}},a.a.createElement("div",null,a.a.createElement("span",{style:{fontSize:"0.85em",display:"block"}},"Network: ",this.props.invokeMultiArgs.network),this.props.goodEstimation?a.a.createElement("span",{style:{fontSize:"0.85em",display:"block",color:"#B33A3A"}},"The amount of GAS or NEO that will be spent on this transaction could not be estimated, please make sure that this is a legitimate transaction"):a.a.createElement(a.a.Fragment,null,[void 0!==this.props.invokeMultiArgs.invokeArgs[this.state.actualIndex].attachedAssets?["NEO","GAS"].map((function(t,n){return a.a.createElement("span",{key:n,style:{fontSize:"0.85em",display:"block"}},"Amount: ",e.props.invokeMultiArgs.invokeArgs[e.state.actualIndex].attachedAssets[t]?e.props.invokeMultiArgs.invokeArgs[e.state.actualIndex].attachedAssets[t]:0," ",t)})):a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{style:{fontSize:"0.85em",display:"block"}},"Amount: ",0," ","NEO"),a.a.createElement("span",{style:{fontSize:"0.85em",display:"block"}},"Amount: ",0," ","GAS")),["NEO","GAS"].map((function(t,n){var r=0;return e.props.invokeMultiArgs.invokeArgs.forEach((function(e){e.attachedAssets&&e.attachedAssets[t]&&(r+=parseFloat(e.attachedAssets[t]))})),a.a.createElement("span",{key:n,style:{fontSize:"0.85em",display:"block"}},"Total amount: ",r," ",t)})),a.a.createElement("span",{style:{fontSize:"0.85em",display:"block"}},"Fee: ",this.props.invokeMultiArgs.fee||0," GAS")])))),a.a.createElement(E.a,{item:!0,xs:!0,style:{width:"100%"}},a.a.createElement(E.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2},a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonAccept",onClick:function(){e.props.resolve("resolveincomponent"),e.unmountComponent()}},t("button_accept"))),a.a.createElement(E.a,{item:!0,xs:!0},a.a.createElement("button",{className:"buttonContinue buttonReject",onClick:function(){e.props.reject(),e.unmountComponent()}},t("button_reject")))))))}}]),t}(a.a.Component),ft=Object(c.b)()(ht),gt=n(179),vt=n(180),yt=null,bt="MainNet",Et=["MainNet","TestNet"];v.settings.httpsOnly=!0;var wt=0,xt=!1,kt=!1,At=!1;function Ct(e){return void 0===e?bt:e}var Ot={getProvider:function(){return Promise.resolve(Ht)},getNetworks:function(){return Promise.resolve({networks:Et,defaultNetwork:bt})},getAccount:function(){return new Promise((function(e,t){mn().then((function(){e({address:yt.address,label:"My Spending Wallet"})})).catch((function(e){t(e)}))}))},getPublicKey:function(){return new Promise((function(e,t){mn().then((function(){e({address:yt.address,publicKey:yt.publicKey})})).catch((function(e){t(e)}))}))},getBalance:qt,getStorage:function(e){return Wt("getStorage",[e.scriptHash,e.key],e.network,(function(e){return{result:null===e?"":e}}))},invokeRead:function(e){var t="";try{var n={scriptHash:e.scriptHash,operation:e.operation,args:e.args.map(Lt)};t=v.sc.createScript(n)}catch(r){return Promise.reject({type:"RPC_ERROR",description:"The parameters or the scriptHash that you passed to the function are wrong"})}return Wt("invokeScript",[t],e.network,(function(e){return e}))},verifyMessage:function(e){var t=v.u.str2hexstring(e.message),n="010001f0"+(v.u.num2VarInt(t.length/2)+t)+"0000";return Promise.resolve({result:y.a.verify.hex(n,e.data,e.publicKey)})},getBlock:Ut,getBlockHeight:zt,getTransaction:function(e){return Wt("getRawTransaction",[e.txid],e.network,(function(e){return e}))},getApplicationLog:function(e){return Wt("getapplicationlog",[e.txid],e.network,(function(e){return e.result}),!0)},send:function(e){return Jt.apply(this,arguments)},invoke:function(e){return tn.apply(this,arguments)},invokeMulti:function(e){return nn.apply(this,arguments)},signMessage:function(e){return rn.apply(this,arguments)},deploy:function(e){return an.apply(this,arguments)},encrypt:function(e){return on.apply(this,arguments)},decrypt:function(e){return sn.apply(this,arguments)},disconnect:function(){return Rt.apply(this,arguments)}},jt={},St=["getProvider","getNetworks","getBalance","getStorage","invokeRead","verifyMessage","getBlock","getBlockHeight","getTransaction","getApplicationLog","disconnect"],It=["getBalance","getStorage","invokeRead","getBlock","getBlockHeight","getTransaction","getApplicationLog","send","invoke","invokeMulti","deploy"];Object.keys(Ot).map((function(e){jt[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(It.includes(e)){if(void 0!==n[0].network&&!Et.includes(n[0].network))return Promise.reject({type:"INVALID_NETWORK",description:"This network is not supported."});n[0].network=Ct(n[0].network)}return yt||St.includes(e)?Ot[e].apply(Ot,n):Bt().then((function(){return Ot[e].apply(Ot,n)})).catch((function(e){return Promise.reject(e)}))}}));var Nt=g()({methods:jt}),Pt={MainNet:[],TestNet:[]},_t={MainNet:0,TestNet:0};Nt.promise.then((function(e){e.sendEvent("READY",Ht),Et.map(function(){var t=Object(h.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zt({network:n});case 2:_t[n]=t.sent.result,setInterval((function(){Ut({network:n,blockHeight:_t[n]+1}).then((function(t){_t[n]=t.index,e.sendEvent("BLOCK_HEIGHT_CHANGED",{network:n,blockHeight:t.index,blockTime:t.time,blockHash:t.hash,tx:t.tx});var r=t.tx.map((function(e){return e.txid.substr(2)}));Pt[n]=Pt[n].filter((function(n){return!r.includes(n)||(e.sendEvent("TRANSACTION_CONFIRMED",{txid:n,blockHeight:t.index}),!1)}))})).catch((function(e){return e}))}),1e3);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));var Tt=[];function Bt(){return new Promise((function(e,t){if(Tt.push({resolve:e,reject:t}),!xt){xt=!0;var n=window.localStorage.getItem("privkey");null===n?(window.addEventListener("message",(function(e){e.origin===b&&e.data.privkey&&(yt=y.a.create.account(e.data.privkey),e.data.rememberMe&&window.localStorage.setItem("privkey",e.data.privkey),ln(yt))}),!1),function(e){var t={type:"CONNECTION_DENIED",description:"The user rejected the request to connect with your dApp."};s.a.render(a.a.createElement(x,{closeWidget:function(){e(t),cn(),xt=!1}}),document.getElementById("content"),(function(){return un(document.getElementById("content").clientHeight)}))}(t)):ln(yt=y.a.create.account(n))}}))}function Rt(){return(Rt=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==yt){e.next=2;break}throw"User has not logged in";case 2:yt=null;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ht={name:"NeoLogin",website:"https://neologin.io",version:"v0.1",compatibility:[],extra:{theme:null,currency:null}},Mt={MainNet:"https://seed4.cityofzion.io",TestNet:"https://test3.cityofzion.io:443"};function Wt(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(){var o=Object(h.a)(d.a.mark((function o(s,i){var c,u,l,m;return d.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,c=Mt[n],u=y.a.create.rpcClient(c),!a){o.next=10;break}return m=y.a.create.query({method:e,params:t}),o.next=7,m.execute(c);case 7:l=o.sent,o.next=13;break;case 10:return o.next=12,u[e].apply(u,Object(p.a)(t));case 12:l=o.sent;case 13:s(r(l)),o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),i({type:"RPC_ERROR",description:"There was an error with this RPC call.",data:""});case 19:case"end":return o.stop()}}),o,null,[[0,16]])})));return function(e,t){return o.apply(this,arguments)}}())}Et.map((function(e){new v.api.neoscan.instance(e).getRPCEndpoint().then((function(t){Mt[e]=t})).catch((function(e){return e}))}));var Dt={MainNet:"https://api.neoscan.io/api/main_net",TestNet:"https://neoscan-testnet.io/api/test_net"};function Ft(e){var t=Dt[e];return{endpoint:t,apiProvider:new v.api.neoscan.instance(t)}}function qt(e){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(h.a)(d.a.mark((function e(t){var n,r,a,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.params.constructor!==Array&&(t.params=[t.params]),n=Ft(t.network),r=n.endpoint,e.next=5,Promise.all(t.params.map((function(e){return fetch(r+"/v1/get_balance/"+e.address).then((function(e){return e.json()})).then((function(t){for(var n=[],r=0;r<t.balance.length;r++)if(void 0===e.assets||e.assets.includes(t.balance[r].asset_symbol)){var a={assetID:t.balance[r].asset_hash,symbol:t.balance[r].asset_symbol,amount:String(t.balance[r].amount)};e.fetchUTXO&&(a.unspent=t.balance[r].unspent.map((function(e){return e.value=String(e.value),e}))),n.push(a)}return{balance:n,address:t.address}}))})));case 5:for(a=e.sent,o={},s=0;s<a.length;s++)o[a[s].address]=a[s].balance;return e.abrupt("return",o);case 11:throw e.prev=11,e.t0=e.catch(0),{type:"MALFORMED_INPUT",description:"An error was encountered when processing this account."};case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function Lt(e){return"Address"===e.type?v.sc.ContractParam.byteArray(e.value,"address"):e}function Ut(e){return Wt("getBlock",[e.blockHeight],e.network,(function(e){return e}))}function zt(e){return Wt("getBlockCount",[],e.network,(function(e){return{result:e}}))}function Gt(e,t,n){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(h.a)(d.a.mark((function e(t,n,r){var a,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.hash,!n){e.next=6;break}return e.abrupt("return",{txid:a,signedTx:t.serialize()});case 6:return o=Mt[r],s=y.a.create.rpcClient(o),e.next=10,s.sendRawTransaction(t);case 10:return Pt[r].push(a),e.abrupt("return",{txid:a,nodeUrl:o});case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),{type:"RPC_ERROR",description:"There was an error when broadcasting this transaction to the network."};case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function Yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"MALFORMED_INPUT",description:"Some input provided was wrong."};throw e&&e.type?e:t}function Jt(){return(Jt=Object(h.a)(d.a.mark((function e(t){var n,r,a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn();case 2:return e.next=4,hn(t);case 4:if(e.prev=4,t.fromAddress===yt.address){e.next=7;break}throw{type:"MALFORMED_INPUT",description:"From address is not a properly formatted address."};case 7:return n=Ft(t.network),n.endpoint,r=n.apiProvider,e.next=10,r.getBalance(t.fromAddress);case 10:return a=e.sent,o=(o=y.a.create.contractTx()).addIntent(t.asset,Number(t.amount),t.toAddress),t.remark&&(o=o.addRemark(t.remark)),$t(o,a,t.fee,t.asset,t.amount,t.network),o=o.sign(yt.privateKey),e.prev=16,e.next=19,Gt(o,t.broadcastOverride,t.network);case 19:return e.abrupt("return",e.sent);case 22:throw e.prev=22,e.t0=e.catch(16),{type:"SEND_ERROR",description:"There was an error when broadcasting this transaction to the network."};case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(4),Yt(e.t1);case 30:case"end":return e.stop()}}),e,null,[[4,27],[16,22]])})))).apply(this,arguments)}function $t(e,t,n,r,o,i){try{return n?e.calculate(t,null,Number(n)):e.calculate(t)}catch(c){throw function(e,t,n){new Promise((function(r,o){var i=bn();s.a.render(a.a.createElement(dt,{asset:e,network:n,amount:t,address:yt.address,privkey:yt.privateKey,reject:function(){return o(dn)},closeWidget:function(){cn()},closeRequest:wn,contid:i.id}),document.getElementById(i.id),(function(){En(i)}))}))}(r,o,i),{type:"INSUFFICIENT_FUNDS",description:"Account doesn't have enough funds."}}}function Xt(e,t,n,r,a,o){if(t)e.addAttribute(v.tx.TxAttrUsage.Script,v.u.reverseHex(v.wallet.getScriptHashFromAddress(yt.address)));else if(void 0!==n||void 0!==r||void 0!==a&&0!==a)if(n){var s=(o.assets.GAS?o.assets.GAS.unspent:[]).concat(o.assets.NEO?o.assets.NEO.unspent:[]).map((function(e){return e.txid}));n.inputs.filter((function(e){return s.includes(e.txid)})).length,e.addAttribute(v.tx.TxAttrUsage.Script,v.u.reverseHex(yt.scriptHash))}else e.addAttribute(v.tx.TxAttrUsage.Script,v.u.reverseHex(yt.scriptHash));else e.addAttribute(v.tx.TxAttrUsage.Script,v.u.reverseHex(yt.scriptHash))}function Qt(e,t){t.outputs.map((function(t){return e.addOutput(new v.tx.TransactionOutput({assetId:v.CONST.ASSET_ID[t.asset],value:t.value,scriptHash:v.wallet.getScriptHashFromAddress(t.address)}))})),e.inputs=t.inputs.map((function(e){return new v.tx.TransactionInput({prevHash:e.txid,prevIndex:e.index})}))}function Zt(e,t){function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=String(e),n?e+"0".repeat(t-e.length):"0".repeat(t-e.length)+e}t.map((function(t){if(!t.txAttrUsage.startsWith("Hash"))throw{type:"MALFORMED_INPUT",description:"".concat(t.txAttrUsage," is not a hash attribute.")};var r=n(t.value,64,!0);switch(t.type){case"Boolean":r=n(t.value?81:0,64,!0);break;case"Address":r=n(v.u.reverseHex(v.wallet.getScriptHashFromAddress(t.value)),64,!0);break;case"Integer":var a=Number(t.value).toString(16);r=n(v.u.reverseHex(a.length%2?"0"+a:a),64,!0);break;case"String":r=n(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=Number(e.charCodeAt(n)).toString(16);t.push(a.length>1&&a||"0"+a)}return t.join("")}(t.value),64,!0)}e.addAttribute(v.tx.TxAttrUsage[t.txAttrUsage],r)}))}function en(e,t,n){["NEO, GAS"].map((function(r){t[r]&&(e=e.addIntent(r,Number(t[r]),v.wallet.getAddressFromScriptHash(n)))}))}function tn(){return(tn=Object(h.a)(d.a.mark((function e(t){var n,r,a,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn();case 2:return e.next=4,gn(t,t.network,void 0!==t.assetIntentOverrides);case 4:return e.prev=4,n=Ft(t.network),n.endpoint,r=n.apiProvider,e.next=8,r.getBalance(yt.address);case 8:return a=e.sent,o=y.a.create.script({scriptHash:t.scriptHash,operation:t.operation,args:t.args.map(Lt)}),Xt(s=new v.tx.InvocationTransaction({script:o,gas:0}),t.triggerContractVerification,t.assetIntentOverrides,t.attachedAssets,t.fee,a),t.assetIntentOverrides?Qt(s,t.assetIntentOverrides):(t.attachedAssets&&en(s,t.attachedAssets,t.scriptHash),$t(s,a,t.fee,t.asset,t.amount,t.network)),t.txHashAttributes&&Zt(s,t.txHashAttributes),s.sign(yt.privateKey),e.next=17,Gt(s,t.broadcastOverride,t.network);case 17:return e.abrupt("return",e.sent);case 20:e.prev=20,e.t0=e.catch(4),Yt(e.t0);case 23:case"end":return e.stop()}}),e,null,[[4,20]])})))).apply(this,arguments)}function nn(){return(nn=Object(h.a)(d.a.mark((function e(t){var n,r,a,o,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn();case 2:return e.next=4,vn(t,void 0!==t.assetIntentOverrides);case 4:return e.prev=4,r=Ft(t.network),r.endpoint,a=r.apiProvider,e.next=8,a.getBalance(yt.address);case 8:return o=e.sent,s=(n=y.a.create).script.apply(n,Object(p.a)(t.invokeArgs.map((function(e){return{scriptHash:e.scriptHash,operation:e.operation,args:e.args.map(Lt)}})))),i=new v.tx.InvocationTransaction({script:s,gas:0}),t.invokeArgs.map((function(e){return Xt(i,e.triggerContractVerification,t.assetIntentOverrides,e.attachedAssets,t.fee,o)})),t.assetIntentOverrides?Qt(i,t.assetIntentOverrides):(t.invokeArgs.map((function(e){e.attachedAssets&&en(i,e.attachedAssets,e.scriptHash)})),$t(i,o,t.fee)),t.txHashAttributes&&Zt(i,t.txHashAttributes),i.sign(yt.privateKey),e.next=17,Gt(i,t.broadcastOverride,t.network);case 17:return e.abrupt("return",e.sent);case 20:e.prev=20,e.t0=e.catch(4),Yt(e.t0);case 23:case"end":return e.stop()}}),e,null,[[4,20]])})))).apply(this,arguments)}function rn(){return(rn=Object(h.a)(d.a.mark((function e(t){var n,r,a,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn();case 2:return e.next=4,fn(t.message);case 4:return e.prev=4,n=Object(H.v4)().replace(/-/g,""),r=v.u.str2hexstring(n+t.message),a=v.u.num2VarInt(r.length/2),o="010001f0"+(a+r)+"0000",s=y.a.sign.hex(o,yt.privateKey),e.abrupt("return",{publicKey:yt.publicKey,message:t.message,salt:n,data:s});case 14:throw e.prev=14,e.t0=e.catch(4),{type:"UNKNOWN_ERROR",description:"There was an unknown error."};case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}function an(){return(an=Object(h.a)(d.a.mark((function e(t){var n,r,a,o,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=100,t.needsStorage&&(n+=400),t.dynamicInvoke&&(n+=500),e.next=5,mn();case 5:return e.next=7,yn(t,n);case 7:if(e.prev=7,t.code){e.next=10;break}throw{type:"MALFORMED_INPUT",description:"ERROR (DEPLOY): Empty script (avm)!"};case 10:return(r=y.a.create.scriptBuilder()).emitPush(v.u.str2hexstring(t.description)).emitPush(v.u.str2hexstring(t.email)).emitPush(v.u.str2hexstring(t.author)).emitPush(v.u.str2hexstring(t.version)).emitPush(v.u.str2hexstring(t.name)).emitPush(0|(t.needsStorage?1:0)|(t.dynamicInvoke?2:0)|(t.isPayable?4:0)).emitPush(t.returnType).emitPush(t.parameterList).emitPush(t.code).emitSysCall("Neo.Contract.Create"),a=Ft(t.network),a.endpoint,o=a.apiProvider,e.next=15,o.getBalance(yt.address);case 15:return s=e.sent,(i=new v.tx.InvocationTransaction({script:r.str,gas:n})).addAttribute(v.tx.TxAttrUsage.Script,v.u.reverseHex(yt.scriptHash)),$t(i,s,t.networkFee),i=i.sign(yt.privateKey),e.next=22,Gt(i,t.broadcastOverride,t.network);case 22:return e.abrupt("return",e.sent);case 25:e.prev=25,e.t0=e.catch(7),Yt(e.t0,{type:"UNKNOWN_ERROR",description:"There was an unknown error."});case 28:case"end":return e.stop()}}),e,null,[[7,25]])})))).apply(this,arguments)}function on(){return(on=Object(h.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.recipientPublicKey,r=t.data,e.next=3,mn();case 3:return e.prev=3,e.abrupt("return",Object(gt.a)({recipientPublicKey:n,wif:v.wallet.getWIFFromPrivateKey(yt.privateKey),data:r}));case 7:e.prev=7,e.t0=e.catch(3),Yt(e.t0);case 10:case"end":return e.stop()}}),e,null,[[3,7]])})))).apply(this,arguments)}function sn(){return(sn=Object(h.a)(d.a.mark((function e(t){var n,r,a,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.senderPublicKey,r=t.iv,a=t.mac,o=t.data,e.next=3,mn();case 3:return e.prev=3,s=Object(vt.a)({senderPublicKey:n,wif:v.wallet.getWIFFromPrivateKey(yt.privateKey),iv:r,mac:a,data:o}),e.abrupt("return",{bufferData:s,data:new TextDecoder("utf-8").decode(s)});case 8:if(e.prev=8,e.t0=e.catch(3),!e.t0.message.includes("Bad MAC")){e.next=14;break}throw{type:"BAD_MAC",description:e.t0.message};case 14:Yt(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function cn(){Nt.promise.then((function(e){return e.closeWidget()}))}function un(e){Nt.promise.then((function(t){return t.displayWidget(e)}))}function ln(e){s.a.unmountComponentAtNode(window.document.getElementById("content")),cn(),Tt.map((function(e){return(0,e.resolve)()})),Tt=[],xt=!1}var pn=[];function mn(){return new Promise((function(e,t){if(pn.push({resolve:e,reject:t}),!kt||At)if(kt=!0,At)e();else{var n=bn();s.a.render(a.a.createElement(P,{resolve:function(){At=!0,Nt.promise.then((function(e){return e.sendEvent("CONNECTED",{address:yt.address,label:"My Spending Wallet"})})),pn.map((function(e){return(0,e.resolve)()}))},reject:function(e){pn.map((function(t){return(0,t.reject)(e)})),pn=[]},closeWidget:function(){kt=!1,cn()},closeRequest:wn,contid:n.id}),document.getElementById(n.id),(function(){En(n)}))}}))}var dn={type:"CANCELED",description:"The user rejected the transaction."};function hn(e){return new Promise((function(t,n){var r=bn();s.a.render(a.a.createElement(T,{sendArgs:e,resolve:t,reject:function(){return n(dn)},closeWidget:function(){kt=!1,cn()},closeRequest:wn,contid:r.id}),document.getElementById(r.id),(function(){En(r)}))}))}function fn(e){return new Promise((function(t,n){var r=bn();s.a.render(a.a.createElement(R,{message:e,resolve:t,reject:function(){return n(dn)},closeWidget:function(){kt=!1,cn()},closeRequest:wn,contid:r.id}),document.getElementById(r.id),(function(){En(r)}))}))}function gn(e,t,n){return new Promise((function(r,o){var i=bn();s.a.render(a.a.createElement(W,{goodEstimation:n,invokeArgs:e,network:t,resolve:r,reject:function(){return o(dn)},closeWidget:function(){kt=!1,cn()},closeRequest:wn,contid:i.id}),document.getElementById(i.id),(function(){En(i)}))}))}function vn(e,t){return new Promise((function(n,r){var o=bn();s.a.render(a.a.createElement(ft,{goodEstimation:t,invokeMultiArgs:e,resolve:n,reject:function(){return r(dn)},closeWidget:function(){kt=!1,cn()},closeRequest:wn,contid:o.id,updateWidgetHeight:function(e){return Nt.promise.then((function(t){return t.updateWidgetHeight(e)}))}}),document.getElementById(o.id),(function(){En(o)}))}))}function yn(e,t){return new Promise((function(n,r){var o=bn();s.a.render(a.a.createElement(F,{sysGasFee:t,deployArgs:e,resolve:n,reject:function(){return r(dn)},closeWidget:function(){kt=!1,cn()},closeRequest:wn,contid:o.id}),document.getElementById(o.id),(function(){En(o)}))}))}function bn(){var e=document.createElement("div");e.id="request-"+wt;var t={top:"0",position:"fixed",width:"100%",background:"white"};for(var n in t)e.style[n]=t[n];return document.getElementById("root").appendChild(e),e}function En(e){un(document.getElementById(e.id).clientHeight),wt++}function wn(){wt--}new MutationObserver((function(e,t){var n=document.getElementById("request-"+(wt-1))||document.getElementById("content");un(n?n.clientHeight:0)})).observe(document.getElementById("root"),{attributes:!0,childList:!0,subtree:!0});var xn=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(C.a)(this,Object(O.a)(t).call(this,e))).startFinalTransaction=function(e,t,r,a,o,s,i,c,u){(function(e,t,n,r,a,o,s,i,c){return new Promise((function(o,s){var u=setInterval(Object(h.a)(d.a.mark((function l(){var p;return d.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:p="",l.prev=1,p="100",l.next=9;break;case 5:return l.prev=5,l.t0=l.catch(1),clearInterval(u),l.abrupt("return",s(l.t0));case 9:if("100"!==p){l.next=14;break}clearInterval(u),at(e,t,n,r,a,i,c,o,s),l.next=16;break;case 14:if("-1"!==p&&"2"!==p&&"3"!==p&&"7000"!==p){l.next=16;break}return l.abrupt("return",s(p));case 16:case"end":return l.stop()}}),l,null,[[1,5]])}))),1e3)}))})(e,t,r,a,o,0,0,c,u).then((function(e){n.setState({resultMsg:"Done! This is your tx id: ".concat(e)})})).catch((function(){n.setState({resultMsg:"Something went wrong (orderId = ".concat(n.state.orderId,"), please contact us (fiat@neologin.io)")})}))},n.state={success:null,resultMsg:""},n}return Object(j.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.url.searchParams.get("contactId");if("true"===this.props.success){var t=this.props.url.searchParams.get("asset"),n=this.props.url.searchParams.get("actualBalance"),r=(e=e||"a?A").split("?")[0],a=e.split("?")[1].split("=")[1],o=this.props.url.searchParams.get("from"),s=this.props.url.searchParams.get("to"),i=this.props.url.searchParams.get("value"),c=this.props.url.searchParams.get("neoAddr");this.setState({resultMsg:"Payment ok. Please wait.."}),this.startFinalTransaction(c,o,s,i,null,r,a,n,t)}else this.setState({resultMsg:"Error with your credit card"})}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,this.state.resultMsg))}}]),t}(a.a.Component);var kn=function(){var e=window.location.href,t=new URL(e),n=t.searchParams.get("success");return a.a.createElement(a.a.Fragment,null,n?a.a.createElement(xn,{url:t,success:n}):a.a.createElement("div",{id:"content"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(kn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[185,1,2]]]);
//# sourceMappingURL=main.fe23555b.chunk.js.map