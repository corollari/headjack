{"version":3,"sources":["translations/i18n.js","aws-exports.js","loginAPI.js","SignIn.js","SignUp.js","Views/VerifyEmail.js","Views/TOTPQR.js","Settings.js","LostPassword.js","config.js","App.js","serviceWorker.js","index.js","logoboxtxt.png"],"names":["i18n","use","initReactI18next","init","resources","en","zh","fallbackLng","debug","ns","defaultNS","keySeparator","interpolation","escapeValue","awsmobile","AmazonCognitoIdentity","require","userPool","CognitoUserPool","UserPoolId","awsconfig","ClientId","verifyAttribute","attribute","cognitoUser","resolve","getAttributeVerificationCode","onSuccess","result","onFailure","err","alert","message","JSON","stringify","login","email","password","Promise","reject","authenticationData","Username","Password","authenticationDetails","AuthenticationDetails","userData","Pool","CognitoUser","authenticateUser","getPrivKey","then","privkey","challengeName","mfaSetup","challengeParameters","associateSoftwareToken","this","selectMFAType","mfaType","prompt","sendMFASelectionAnswer","totpRequired","secretCode","challengeSolve","challengeAnswer","sendMFACode","mfaRequired","codeDeliveryDetails","register","newsletter","sync","importedPrivKey","a","attributeList","Neon","default","create","privateKey","dataEmail","Name","Value","encrypt","encryptedPrivkey","dataPrivkey","dataNewsletter","attributeEmail","CognitoUserAttribute","attributePrivkey","attributeNewsletter","push","signUp","user","getUserAttributes","i","length","getName","decrypt","getValue","forgotPassword","console","log","inputVerificationCode","ciphertext","key","Cryptr","plaintext","updateUserData","name","value","data","attribute2Update","updateAttributes","updatePrivkey","downloadPrivKey","fetch","window","btoa","resp","blob","url","URL","createObjectURL","document","createElement","style","display","href","download","body","appendChild","click","revokeObjectURL","SignIn","props","state","wrongEmail","wrongPassword","twoFA","passwordLostClick","signUpClick","rememberMe","MFACode","wrongMFACode","handleLogin","handleInputChange","bind","handleSubmit","handleMFASubmit","event","target","type","checked","setState","preventDefault","twoFASolve","code","t","classes","Container","component","maxWidth","CssBaseline","className","paper","src","logo","height","marginBottom","Typography","variant","color","form","onSubmit","TextField","margin","required","fullWidth","id","label","autoFocus","error","helperText","onChange","autoComplete","FormControlLabel","control","Checkbox","Grid","container","direction","justify","alignItems","item","xs","Link","onClick","textAlign","marginTop","changeLanguage","language","rel","React","Component","withTranslation","withStyles","theme","backgroundColor","palette","common","white","spacing","flexDirection","avatar","secondary","main","width","submit","SignUp","signInClick","wrongPassword1","wrongPassword2","password1","password2","privacyPolicy","registered","showMore","syncPrivKey","importPrivKey","validate","validateEmail","zxcvbn","pwdSecurity","score","suggestion","feedback","suggestions","join","catch","privKey","Button","sm","root","cursor","Collapse","in","Switch","noValidate","FormHelperText","test","String","toLowerCase","verifyCode","navigateBack","wrongEmailCode","useState","input","setInput","fontSize","secretTOTP","useEffect","secret","canvas","getElementById","QRCode","toCanvas","drawQR","Settings","handleNewsletterChange","verifyCodeEmail","verificationCode","verifyEmailView","verifyCodeTOTP","verifySoftwareToken","setUserMfaPreference","PreferredMfa","Enabled","verifyTOTPCodeView","preferredMFA","newsletterChecked","emailIsVerified","email_verified","emial","marginLeft","marginRight","subtittle","settingItem","disabled","openQRView","associateSecretCode","enableTOTP","background","localStorage","removeItem","close","LostPassword","goBackClick","wrongCode","emailCompleted","codeCompleted","recovered","confirmPassword","goBackButton","server","App","includes","opener","location","loginScreen","twoFAScreen","registerScreen","lostPasswordScreen","openSettings","url_string","settings","searchParams","get","postMessage","Boolean","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.2a74bac6.chunk.js","sourcesContent":["import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport en from './en.json'\nimport zh from './zh.json'\n\ni18n\n    .use(initReactI18next)\n    .init({\n        // we init with resources\n        resources: {\n            en: en,\n            zh: zh\n        },\n        fallbackLng: \"en\",\n        debug: true,\n\n        // have a common namespace used around the full app\n        ns: [\"common\", \"inverse\"],\n        defaultNS: \"common\",\n\n        keySeparator: false, // we use content as keys\n\n        interpolation: {\n            escapeValue: false\n        }\n    });\n\nexport default i18n;\n","// WARNING: DO NOT EDIT. This file is automatically generated by AWS Amplify. It will be overwritten.\n\nconst awsmobile = {\n    \"aws_project_region\": \"eu-west-1\",\n    \"aws_cognito_identity_pool_id\": \"eu-west-1:9f10037e-500e-480b-bb84-1eb4c4dafd77\",\n    \"aws_cognito_region\": \"eu-west-1\",\n    \"aws_user_pools_id\": \"eu-west-1_BFMaBVd3r\",\n    \"aws_user_pools_web_client_id\": \"41q8m3p3u9dgadcntufbbapt7u\",\n    \"oauth\": {}\n};\n\n\nexport default awsmobile;\n","import awsconfig from './aws-exports';\n//import { CognitoUserPool, CognitoUserAttribute, CognitoUser } from 'amazon-cognito-identity-js';\nconst AmazonCognitoIdentity = require('amazon-cognito-identity-js');\n\nlet userPool = new AmazonCognitoIdentity.CognitoUserPool({\n\tUserPoolId: awsconfig[\"aws_user_pools_id\"], // Your user pool id here\n\tClientId: awsconfig[\"aws_user_pools_web_client_id\"] // Your client id here\n});\n\nfunction verifyAttribute(attribute, cognitoUser, resolve) {\n\tcognitoUser.getAttributeVerificationCode(attribute, {\n\t\tonSuccess: function (result) {\n\t\t\tresolve();\n\t\t},\n\t\tonFailure: function (err) {\n\t\t\talert(err.message || JSON.stringify(err));\n\t\t}/* ,\n\t\tinputVerificationCode:  function () {\n\t\t\tvar verificationCode = prompt('Please input verification code: ', '');\n\t\t\tcognitoUser.verifyAttribute('email', verificationCode, this);\n\t\t} */\n\t});\n}\n\nfunction login(email, password) {\n\treturn new Promise((resolve, reject) => {\n\t\tvar authenticationData = {\n\t\t\tUsername: email, // your username here\n\t\t\tPassword: password, // your password here\n\t\t};\n\t\tvar authenticationDetails =\n\t\t\tnew AmazonCognitoIdentity.AuthenticationDetails(authenticationData);\n\n\t\tvar userData = {\n\t\t\tUsername: email,\n\t\t\tPool: userPool\n\t\t};\n\n\t\tvar cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);\n\t\tcognitoUser.authenticateUser(authenticationDetails, {\n\t\t\tonSuccess: function (result) {\n\t\t\t\t//var accessToken = result.getAccessToken().getJwtToken();\n\t\t\t\tgetPrivKey(cognitoUser, password).then((privkey) => resolve({\n\t\t\t\t\tprivkey,\n\t\t\t\t\temail,\n\t\t\t\t\tpassword,\n\t\t\t\t\tcognitoUser,\n\t\t\t\t\tchallengeName: null\n\t\t\t\t}));\n\t\t\t},\n\t\t\tonFailure: function (err) {\n\t\t\t\treject(err);\n\t\t\t},\n\t\t\tmfaSetup: function (challengeName, challengeParameters) {\n\t\t\t\t//Should never happen\n\t\t\t\tcognitoUser.associateSoftwareToken(this);\n\t\t\t},\n\t\t\tselectMFAType: function (challengeName, challengeParameters) {\n\t\t\t\tvar mfaType = prompt('Please select the MFA method.', ''); // valid values for mfaType is \"SMS_MFA\", \"SOFTWARE_TOKEN_MFA\"\n\t\t\t\tcognitoUser.sendMFASelectionAnswer(mfaType, this);\n\t\t\t},\n\t\t\ttotpRequired: function (secretCode) {\n\t\t\t\tresolve({\n\t\t\t\t\tchallengeName: 'SOFTWARE_TOKEN_MFA',\n\t\t\t\t\tchallengeSolve: (challengeAnswer) => {\n\t\t\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\t\tcognitoUser.sendMFACode(\n\t\t\t\t\t\t\t\tchallengeAnswer,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tonSuccess: function (result) {\n\t\t\t\t\t\t\t\t\t\tgetPrivKey(cognitoUser, password).then((privkey) => resolve({\n\t\t\t\t\t\t\t\t\t\t\tprivkey,\n\t\t\t\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\t\t\t\tpassword,\n\t\t\t\t\t\t\t\t\t\t\tcognitoUser,\n\t\t\t\t\t\t\t\t\t\t\tchallengeName: null\n\t\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonFailure: function (err) {\n\t\t\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'SOFTWARE_TOKEN_MFA')\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t/*\n\t\t\t\tvar challengeAnswer = await get2FAcode('Please input the TOTP code.');\n\t\t\t\tcognitoUser.sendMFACode(challengeAnswer, this, 'SOFTWARE_TOKEN_MFA');\n\t\t\t\t*/\n\t\t\t},\n\t\t\tmfaRequired: function (codeDeliveryDetails) {\n\t\t\t\tresolve({\n\t\t\t\t\tchallengeName: 'SMS_MFA',\n\t\t\t\t\tchallengeSolve: (challengeAnswer) => {\n\t\t\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\t\tcognitoUser.sendMFACode(\n\t\t\t\t\t\t\t\tchallengeAnswer,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tonSuccess: function (result) {\n\t\t\t\t\t\t\t\t\t\tgetPrivKey(cognitoUser, password).then((privkey) => resolve({\n\t\t\t\t\t\t\t\t\t\t\tprivkey,\n\t\t\t\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\t\t\t\tpassword,\n\t\t\t\t\t\t\t\t\t\t\tcognitoUser,\n\t\t\t\t\t\t\t\t\t\t\tchallengeName: null\n\t\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonFailure: function (err) {\n\t\t\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t/*\n\t\t\t\tvar verificationCode = await get2FAcode('Please input verification code');\n\t\t\t\tcognitoUser.sendMFACode(verificationCode, this);\n\t\t\t\t*/\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction resolveUser(cognitoUser, email, password, resolve, reject) {\n}\n\nfunction enableTOTP(cognitoUser, email, openQRView) {\n\treturn new Promise((resolve, reject) => {\n\t\tcognitoUser.associateSoftwareToken({\n\t\t\tonSuccess: resolve,\n\t\t\tonFailure: function (err) {\n\t\t\t\talert(err.message || JSON.stringify(err));\n\t\t\t\treject();\n\t\t\t},\n\t\t\tmfaSetup: function (challengeName, challengeParameters) {\n\t\t\t\tcognitoUser.associateSoftwareToken(this);\n\t\t\t},\n\t\t\tassociateSecretCode: function (secretCode) {\n\t\t\t\topenQRView(secretCode, email)\n\t\t\t\tresolve()\n\t\t\t\t//var challengeAnswer = prompt('Please input the TOTP code.', '');\n\t\t\t\t/* cognitoUser.verifySoftwareToken(challengeAnswer, 'My TOTP device', {\n\t\t\t\t\tonSuccess: function (result) {\n\t\t\t\t\t\tconst totpMfaSettings = {\n\t\t\t\t\t\t\tPreferredMfa: true,\n\t\t\t\t\t\t\tEnabled: true\n\t\t\t\t\t\t};\n\t\t\t\t\t\tcognitoUser.setUserMfaPreference(null, totpMfaSettings, function (err, result) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\talert(err.message || JSON.stringify(err));\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsole.log('call result ' + result);\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tonFailure: function (err) {\n\t\t\t\t\t\talert(err.message || JSON.stringify(err));\n\t\t\t\t\t\treject();\n\t\t\t\t\t},\n\t\t\t\t}); */\n\t\t\t},\n\t\t});\n\t});\n}\n\nfunction disableTOTP(cognitoUser) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst totpMfaSettings = {\n\t\t\tPreferredMfa: false,\n\t\t\tEnabled: false,\n\t\t};\n\t\tcognitoUser.setUserMfaPreference(null, totpMfaSettings, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\treject(err)\n\t\t\t\talert(err.message || JSON.stringify(err));\n\t\t\t}\n\t\t\tresolve(result)\n\t\t});\n\t})\n}\n\nfunction verifyEmail(cognitoUser) {\n\treturn new Promise((resolve, reject) => {\n\t\tverifyAttribute('email', cognitoUser, resolve);\n\t});\n}\nfunction verifyPhone(cognitoUser) {\n\treturn new Promise((resolve, reject) => {\n\t\tverifyAttribute(\"phone_number\", cognitoUser, resolve);\n\t});\n}\nfunction addPhone(phone, cognitoUser) {\n\treturn new Promise((resolve, reject) => {\n\t\tvar attributeList = [];\n\t\tvar dataPhoneNumber = {\n\t\t\tName: 'phone_number',\n\t\t\tValue: phone //Style: '+15555555555'\n\t\t};\n\t\tvar attributePhoneNumber = new AmazonCognitoIdentity.CognitoUserAttribute(dataPhoneNumber);\n\t\tattributeList.push(attributePhoneNumber);\n\t\tcognitoUser.updateAttributes(attributeList, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\talert(err.message || JSON.stringify(err));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresolve();\n\t\t});\n\t});\n}\n\nfunction register(email, password, newsletter, sync, importedPrivKey) {\n\treturn new Promise(async (resolve, reject) => {\n\t\tvar attributeList = [];\n\t\t\n\t\tlet privkey = null\n\t\tif (importedPrivKey) {\n\t\t\tprivkey = importedPrivKey\n\t\t} else {\n\t\t\tprivkey = await generatePrivateKey();\n\t\t}\n\n\t\tif (!sync) {\n\t\t\treturn resolve(privkey)\n\t\t}\n\n\t\tvar dataEmail = {\n                        Name: 'email',\n                        Value: email\n                };\n\n\n\t\tconst encryptedPrivkey = await encrypt(privkey, password);\n\n\t\tvar dataPrivkey = {\n\t\t\tName: 'custom:privkey',\n\t\t\tValue: encryptedPrivkey\n\t\t};\n\n\t\tvar dataNewsletter = {\n\t\t\tName: \"custom:newsletter\",\n\t\t\tValue: newsletter\n\t\t};\n\n\t\tvar attributeEmail = new AmazonCognitoIdentity.CognitoUserAttribute(dataEmail);\n\t\tvar attributePrivkey = new AmazonCognitoIdentity.CognitoUserAttribute(dataPrivkey);\n\t\tvar attributeNewsletter = new AmazonCognitoIdentity.CognitoUserAttribute(dataNewsletter);\n\n\t\tattributeList.push(attributeEmail);\n\t\tattributeList.push(attributePrivkey);\n\t\tattributeList.push(attributeNewsletter);\n\n\t\tuserPool.signUp(email, password, attributeList, null, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\treject(err);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar cognitoUser = result.user;\n\t\t\tresolve(privkey);\n\t\t});\n\t});\n}\n\nfunction getPrivKey(cognitoUser, password) {\n\treturn new Promise((resolve, reject) => {\n\t\tcognitoUser.getUserAttributes(function (err, result) {\n\t\t\tif (err) {\n\t\t\t\treject(err);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\t\tif (result[i].getName() == \"custom:privkey\") {\n\t\t\t\t\t//Decrypt\n\t\t\t\t\tlet privkey = decrypt(result[i].getValue(), password);\n\t\t\t\t\t//Send\n\t\t\t\t\tresolve(privkey);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction forgotPassword(email) {\n\treturn new Promise((resolve, reject) => {\n\t\tlet userData = {\n\t\t\tUsername: email,\n\t\t\tPool: userPool,\n\t\t}\n\t\tlet cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);\n\n\t\tcognitoUser.forgotPassword({\n\t\t\tonSuccess: function (result) { },\n\t\t\tonFailure: function (err) {\n\t\t\t\talert(err.message);\n\t\t\t\tconsole.log(err);\n\t\t\t},\n\t\t\tinputVerificationCode() {\n\t\t\t\tresolve(cognitoUser)\n\t\t\t\t/* cognitoUser.confirmPassword(verificationCode, newPassword, this); */\n\t\t\t}\n\t\t})\n\t});\n}\n\nfunction decrypt(ciphertext, key) {\n\treturn import(\"cryptr\")\n\t\t.then((Cryptr) => {\n\t\t\tCryptr = Cryptr.default;\n\t\t\treturn new Cryptr(key).decrypt(ciphertext);\n\t\t});\n}\n\nfunction encrypt(plaintext, key) {\n\treturn import(\"cryptr\")\n\t\t.then((Cryptr) => {\n\t\t\tCryptr = Cryptr.default;\n\t\t\treturn new Cryptr(key).encrypt(plaintext);\n\t\t});\n}\n\nfunction generatePrivateKey() {\n\treturn import(\"@cityofzion/neon-js\")\n\t\t.then((Neon) => {\n\t\t\tNeon = Neon.default;\n\t\t\treturn Neon.create.privateKey();\n\t\t});\n}\n\nfunction getUserData(cognitoUser) {\n\treturn new Promise((resolve, reject) => {\n\t\tcognitoUser.getUserAttributes(function (err, result) {\n\t\t\tif (err) {\n\t\t\t\treject(err);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet data = {}\n\t\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\t\tdata[result[i].getName()] = result[i].getValue()\n\t\t\t}\n\t\t\tresolve(data)\n\t\t});\n\t});\n}\n\nfunction updateUserData(cognitoUser, name, value) {\n\treturn new Promise((resolve, reject) => {\n\t\tvar attributeList = [];\n\t\tvar data = {\n\t\t\tName: name,\n\t\t\tValue: value\n\t\t};\n\t\tvar attribute2Update = new AmazonCognitoIdentity.CognitoUserAttribute(data);\n\t\tattributeList.push(attribute2Update);\n\t\tcognitoUser.updateAttributes(attributeList, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\talert(err.message || JSON.stringify(err));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresolve(result);\n\t\t});\n\t});\n}\n\nasync function updatePrivkey(cognitoUser, password, privkey) {\n\tconst encryptedPrivkey = await encrypt(privkey, password);\n\tupdateUserData(cognitoUser, \"custom:privkey\", encryptedPrivkey);\n}\n\nfunction downloadPrivKey(data) {\n\treturn fetch('data:text/plain;base64,' + window.btoa(data))\n\t\t.then(resp => resp.blob())\n\t\t.then(blob => {\n\t\t\tconst url = window.URL.createObjectURL(blob);\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.style.display = 'none';\n\t\t\ta.href = url;\n\t\t\t// the filename you want\n\t\t\ta.download = 'private-key.txt';\n\t\t\tdocument.body.appendChild(a);\n\t\t\ta.click();\n\t\t\twindow.URL.revokeObjectURL(url);\n\t\t})\n}\n\n// Preload stuff\nwindow.fetch(\"https://cognito-idp.eu-west-1.amazonaws.com/\");\nimport(\"cryptr\");\nimport(\"zxcvbn\");\nimport(\"@cityofzion/neon-js\");\n\nexport { register, login, addPhone, enableTOTP, disableTOTP, verifyEmail, verifyPhone, getUserData, updateUserData, downloadPrivKey, forgotPassword, updatePrivkey }; \n","import React from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport PropTypes from 'prop-types';\nimport { login } from './loginAPI';\nimport logo from './logoboxtxt.png';\nimport { withTranslation } from 'react-i18next';\n\nconst styles = (theme => ({\n\t'@global': {\n\t\tbody: {\n\t\t\tbackgroundColor: theme.palette.common.white,\n\t\t},\n\t},\n\tpaper: {\n\t\tmarginTop: theme.spacing(8),\n\t\tmarginBottom: theme.spacing(5),\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\tavatar: {\n\t\tmargin: theme.spacing(1),\n\t\tbackgroundColor: theme.palette.secondary.main,\n\t},\n\tform: {\n\t\twidth: '100%', // Fix IE 11 issue.\n\t\tmarginTop: theme.spacing(1),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n}));\n\nclass SignIn extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\twrongEmail: false,\n\t\t\twrongPassword: false,\n\t\t\ttwoFA: false,\n\t\t\tpasswordLostClick: props.passwordLostClick,\n\t\t\tsignUpClick: props.signUpClick,\n\t\t\temail: '',\n\t\t\tpassword: '',\n\t\t\trememberMe: false,\n\t\t\tMFACode: '',\n\t\t\twrongMFACode: '',\n\t\t\thandleLogin: props.handleLogin,\n\t\t};\n\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleMFASubmit = this.handleMFASubmit.bind(this);\n\t}\n\n\thandleInputChange(event) {\n\t\tconst target = event.target;\n\t\tconst value = target.type === 'checkbox' ? target.checked : target.value;\n\t\tconst name = target.name;\n\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t});\n\n\t\tif (name === \"email\" && this.state.wrongEmail) {\n\t\t\tthis.setState({\n\t\t\t\twrongEmail: false\n\t\t\t});\n\t\t}\n\t\tif (name === \"password\" && this.state.wrongPassword) {\n\t\t\tthis.setState({\n\t\t\t\twrongPassword: false\n\t\t\t});\n\t\t}\n\t\tif (name === \"MFACode\" && this.state.wrongMFACode) {\n\t\t\tthis.setState({\n\t\t\t\twrongMFACode: false\n\t\t\t});\n\t\t}\n\t}\n\n\tasync handleMFASubmit(event) {\n\t\tevent.preventDefault();\n\t\ttry {\n\t\t\tconst user = await this.state.twoFASolve(this.state.MFACode);\n\t\t\tthis.state.handleLogin(user.privkey, this.state.rememberMe, user.cognitoUser, this.state.twoFA);\n\t\t} catch (err) {\n\t\t\tif (err.code === \"CodeMismatchException\") {\n\t\t\t\tthis.setState({ wrongMFACode: true });\n\t\t\t} else {\n\t\t\t\twindow.alert(this.props.t(\"common:alert_session_expired\"));\n\t\t\t}\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n\tasync handleSubmit(event) {\n\t\tevent.preventDefault();\n\t\ttry {\n\t\t\tconst user = await login(this.state.email, this.state.password);\n\t\t\tif (user.challengeName === 'SMS_MFA' ||\n\t\t\t\tuser.challengeName === 'SOFTWARE_TOKEN_MFA') {\n\t\t\t\t// You need to get the code from the UI inputs\n\t\t\t\t// and then trigger the following function with a button click\n\t\t\t\t// If MFA is enabled, sign-in should be confirmed with the confirmation code\n\t\t\t\tthis.setState({\n\t\t\t\t\ttwoFA: user.challengeName,\n\t\t\t\t\ttwoFASolve: user.challengeSolve,\n\t\t\t\t});\n\t\t\t} else if (user.challengeName === 'NEW_PASSWORD_REQUIRED') {\n\t\t\t\t/*\n\t\t\t\tconst {requiredAttributes} = user.challengeParam; // the array of required attributes, e.g ['email', 'phone_number']\n\t\t\t\t// You need to get the new password and required attributes from the UI inputs\n\t\t\t\t// and then trigger the following function with a button click\n\t\t\t\t// For example, the email and phone_number are required attributes\n\t\t\t\tconst {username, email, phone_number} = getInfoFromUserInput();\n\t\t\t\tconst loggedUser = await Auth.completeNewPassword(\n\t\t\t\t\tuser,              // the Cognito User Object\n\t\t\t\t\tnewPassword,       // the new password\n\t\t\t\t\t// OPTIONAL, the required attributes\n\t\t\t\t\t{\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tphone_number,\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\t*/\n\t\t\t} else if (user.challengeName === 'MFA_SETUP') {\n\t\t\t\t// This happens when the MFA method is TOTP\n\t\t\t\t// The user needs to setup the TOTP before using it\n\t\t\t\t// More info please check the Enabling MFA part\n\t\t\t} else {\n\t\t\t\t// The user directly signs in\n\t\t\t\tthis.state.handleLogin(user.privkey, this.state.rememberMe, user.cognitoUser);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (err.code === 'UserNotConfirmedException') {\n\t\t\t\t// The error happens if the user didn't finish the confirmation step when signing up\n\t\t\t\t// In this case you need to resend the code and confirm the user\n\t\t\t\t// About how to resend the code and confirm the user, please check the signUp part\n\t\t\t} else if (err.code === 'PasswordResetRequiredException') {\n\t\t\t\t// The error happens when the password is reset in the Cognito console\n\t\t\t\t// In this case you need to call forgotPassword to reset the password\n\t\t\t\t// Please check the Forgot Password part.\n\t\t\t} else if (err.code === 'NotAuthorizedException') {\n\t\t\t\t// The error happens when the incorrect password is provided\n\t\t\t\tthis.setState({ wrongPassword: true });\n\t\t\t} else if (err.code === 'UserNotFoundException') {\n\t\t\t\t// The error happens when the supplied username/email does not exist in the Cognito user pool\n\t\t\t\tthis.setState({ wrongEmail: true });\n\t\t\t} else {\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { classes, t, i18n } = this.props;\n\n\t\treturn (\n\t\t\t<Container component=\"main\" maxWidth=\"xs\">\n\t\t\t\t<CssBaseline />\n\t\t\t\t<div className={classes.paper}>\n\t\t\t\t\t<img src={logo} style={{ height: '5em', marginBottom: '5em' }} />\n\t\t\t\t\t{/* <span style={{ fontSize: '2rem', marginBottom: '2rem' }}>\n\t\t\t\t\t\tNEO<span style={{ color: '' }}>LOGIN</span>\n\t\t\t\t\t</span> */}\n\t\t\t\t\t<Typography component=\"h1\" variant=\"h5\" style={{ color: '#6A737D' }}>\n\t\t\t\t\t\t{t(\"tittle_signin\")}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<form className={classes.form} onSubmit={this.state.twoFA ? this.handleMFASubmit : this.handleSubmit}>\n\t\t\t\t\t\t{this.state.twoFA ?\n\t\t\t\t\t\t\t([\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tkey=\"MFACode\"\n\t\t\t\t\t\t\t\t\tid=\"MFACode\"\n\t\t\t\t\t\t\t\t\tlabel={this.state.twoFA === \"SMS_MFA\" ? t(\"label_mfaSMS\") : t(\"label_mfaTOTP\")}\n\t\t\t\t\t\t\t\t\tname=\"MFACode\"\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tvalue={this.state.MFACode}\n\t\t\t\t\t\t\t\t\terror={this.state.wrongMFACode ? true : null}\n\t\t\t\t\t\t\t\t\thelperText={this.state.wrongMFACode ? t(\"helper_wrongMFA\") : this.state.twoFA === \"SMS_MFA\" ? t(\"helper_smsMFA\") : t(\"helper_totpMFA\")}\n\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t]) : ([\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tkey=\"email\"\n\t\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\t\tlabel={t(\"signUp_form:label_email\")}\n\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"email\"\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tvalue={this.state.email}\n\t\t\t\t\t\t\t\t\terror={this.state.wrongEmail ? true : null}\n\t\t\t\t\t\t\t\t\thelperText={this.state.wrongEmail ? t(\"wrongEmail\") : null}\n\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t/>,\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\tkey=\"password\"\n\t\t\t\t\t\t\t\t\tlabel={t(\"label_password\")}\n\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.password}\n\t\t\t\t\t\t\t\t\terror={this.state.wrongPassword ? true : null}\n\t\t\t\t\t\t\t\t\thelperText={this.state.wrongPassword ? t(\"wrongPassword\") : null}\n\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t/>,\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox value=\"remember\" color=\"primary\" name=\"rememberMe\" checked={this.state.rememberMe} onChange={this.handleInputChange} />}\n\t\t\t\t\t\t\t\t\tlabel={t(\"checkbox_rememberme\")}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t])}\n\t\t\t\t\t\t<button className='buttonContinue' type=\"submit\" style={{ margin: '1rem 0' }}>\n\t\t\t\t\t\t\t{t(\"button_signin\")}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{this.state.twoFA ? null : (\n\t\t\t\t\t\t\t<Grid container direction=\"column\">\n\t\t\t\t\t\t\t\t<Grid container\n\t\t\t\t\t\t\t\t\tjustify=\"center\"\n\t\t\t\t\t\t\t\t\talignItems=\"center\">\n\t\t\t\t\t\t\t\t\t<Grid item xs>\n\t\t\t\t\t\t\t\t\t\t<Link href=\"#\" variant=\"body2\" onClick={this.state.passwordLostClick}>\n\t\t\t\t\t\t\t\t\t\t\t<span style={{ color: '#2e5aac' }}>{t(\"link_forgotpw\")}</span>\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<Link href=\"#\" variant=\"body2\" onClick={this.state.signUpClick}>\n\t\t\t\t\t\t\t\t\t\t\t<span style={{ color: '#2e5aac' }}>{t(\"link_signUp\")}</span>\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item style={{ textAlign: 'center', marginTop: '1rem' }}>\n\t\t\t\t\t\t\t\t\t<Link href=\"#\" variant=\"body2\" onClick={() => i18n.changeLanguage(i18n.language === 'zh' ? 'en' : 'zh')}>\n\t\t\t\t\t\t\t\t\t\t<span style={{ color: '#2e5aac' }}>{t(\"inverse:link_language\")}</span>\n\t\t\t\t\t\t\t\t\t</Link>{'\\u00A0'}\n\t\t\t\t\t\t\t\t\t<Link target=\"_blank\" rel=\"noopener\" variant=\"body2\" href=\"https://github.com/safudex/neologin/issues\">\n\t\t\t\t\t\t\t\t\t\t<span style={{ color: '#2e5aac' }}>{t(\"common:menu_issues\")}</span>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</Container >\n\t\t);\n\t}\n}\n\nSignIn.propTypes = {\n\tclasses: PropTypes.object.isRequired,\n};\n\nexport default withTranslation(\"signIn_form\")(withStyles(styles)(SignIn))\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport { withStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport PropTypes from 'prop-types';\nimport { register, downloadPrivKey } from './loginAPI';\nimport logo from './logoboxtxt.png';\nimport Switch from '@material-ui/core/Switch';\nimport Collapse from '@material-ui/core/Collapse';\nimport { withTranslation } from 'react-i18next';\n\nconst styles = (theme => ({\n\t'@global': {\n\t\tbody: {\n\t\t\tbackgroundColor: theme.palette.common.white,\n\t\t},\n\t},\n\tpaper: {\n\t\tmarginTop: theme.spacing(8),\n\t\tmarginBottom: theme.spacing(5),\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\tavatar: {\n\t\tmargin: theme.spacing(1),\n\t\tbackgroundColor: theme.palette.secondary.main,\n\t},\n\tform: {\n\t\twidth: '100%', // Fix IE 11 issue.\n\t\tmarginTop: theme.spacing(3),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n}));\n\nclass SignUp extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tsignInClick: props.signInClick,\n\t\t\twrongEmail: false,\n\t\t\twrongPassword1: false,\n\t\t\twrongPassword2: false,\n\t\t\temail: '',\n\t\t\tpassword1: \"\",\n\t\t\tpassword2: \"\",\n\t\t\tnewsletter: false,\n\t\t\tprivacyPolicy: false,\n\t\t\thandleLogin: props.handleLogin,\n\t\t\tregistered: false,\n\t\t\tprivkey: null,\n\t\t\tshowMore: false,\n\t\t\tsyncPrivKey: true,\n\t\t\timportPrivKey: false,\n\t\t\timportedPrivKey: null\n\t\t};\n\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\n\thandleInputChange(event) {\n\t\tconst target = event.target;\n\t\tconst value = target.type === 'checkbox' ? target.checked : target.value;\n\t\tconst name = target.name;\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t}, () => this.validate());\n\t\tif (name === 'importPrivKey' && !value)\n\t\t\tthis.setState({ importedPrivKey: null })\n\t}\n\n\tasync validate() {\n\t\tif (validateEmail(this.state.email) || !this.state.email) {\n\t\t\tthis.setState({\n\t\t\t\twrongEmail: false\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\twrongEmail: this.props.t(\"wrongEmail\")\n\t\t\t});\n\t\t}\n\n\t\tif (this.state.password1 !== this.state.password2 && this.state.password2) {\n\t\t\tthis.setState({\n\t\t\t\twrongPassword2: this.props.t(\"wrongPassword2\")\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\twrongPassword2: false\n\t\t\t});\n\t\t}\n\n\t\treturn import(\"zxcvbn\").then((zxcvbn) => {\n\t\t\tzxcvbn = zxcvbn.default;\n\t\t\tlet pwdSecurity = zxcvbn(this.state.password1);\n\t\t\tif (pwdSecurity.score < 3 && this.state.password1) {\n\t\t\t\tthis.setState({\n\t\t\t\t\twrongPassword1: this.props.t(\"wrongPassword1\", { suggestion: pwdSecurity.feedback.suggestions.join('\\n') })\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\twrongPassword1: false\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn (this.state.password1 === this.state.password2) && validateEmail(this.state.email) && (pwdSecurity.score >= 3) && this.state.privacyPolicy;\n\t\t})\n\t}\n\n\tasync handleSubmit(event) {\n\t\tevent.preventDefault();\n\t\tif (!this.state.privacyPolicy || this.state.syncPrivKey && !(await this.validate())) {\n\t\t\treturn;\n\t\t}\n\n\t\tregister(this.state.email, this.state.password1, this.state.newsletter ? \"true\" : \"false\", this.state.syncPrivKey, this.state.importedPrivKey)\n\t\t\t.then(privkey => {\n\t\t\t\t/*\n\t\t\t\t*/\n\t\t\t\tdownloadPrivKey(this.props.t(\"common:downloadedPKFileTxt\", { privkey: privkey }))\n\t\t\t\t\t.then(() => this.state.handleLogin(privkey, !this.state.syncPrivKey))\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tprivkey: privkey,\n\t\t\t\t\t\t\tregistered: true,\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis.setState({\n\t\t\t\t\twrongEmail: this.props.t(\"registerWrongEmail\")\n\t\t\t\t});\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t}\n\n\trender() {\n\t\tconst { classes, t } = this.props;\n\t\treturn (\n\t\t\t<Container component=\"main\" maxWidth=\"xs\">\n\t\t\t\t<CssBaseline />\n\t\t\t\t<div className={classes.paper}>\n\t\t\t\t\t<img src={logo} style={{ height: '5em', marginBottom: '2em' }} />\n\t\t\t\t\t<Typography component=\"h1\" variant=\"h5\" style={{ color: '#6A737D' }}>\n\t\t\t\t\t\t{this.state.registered ? t(\"tittle_welcome\") : t(\"tittle_signup\")}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t{this.state.registered ? (\n\t\t\t\t\t\t<div style={{ marginTop: '2em' }}>\n\t\t\t\t\t\t\t<Typography component=\"p\">\n\t\t\t\t\t\t\t\t{t('instructionsPrivKey')}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<a download=\"private-key.txt\" href={'data:text/plain;base64,' + window.btoa(t(\"common:downloadedPKFileTxt\", { privKey: this.state.privkey }))}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t(\"common:button_download\")}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={() => window.alert(this.state.privkey)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"button_displaykey\")}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\t\t\tonClick={() => this.state.handleLogin(this.state.privkey, false)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t(\"button_continue\")}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.syncPrivKey ?\n\t\t\t\t\t\t\t\t\t<><Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\trequired={this.state.syncPrivKey}\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"label_email\")}\n\t\t\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"email\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.email}\n\t\t\t\t\t\t\t\t\t\t\terror={this.state.wrongEmail ? true : null}\n\t\t\t\t\t\t\t\t\t\t\thelperText={this.state.wrongEmail}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\trequired={this.state.syncPrivKey}\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\tname=\"password1\"\n\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"label_password\")}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"password1\"\n\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.password1}\n\t\t\t\t\t\t\t\t\t\t\terror={this.state.wrongPassword1 ? true : null}\n\t\t\t\t\t\t\t\t\t\t\thelperText={this.state.wrongPassword1}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\trequired={this.state.syncPrivKey}\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\tname=\"password2\"\n\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"label_confirmEmail\")}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"password2\"\n\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.password}\n\t\t\t\t\t\t\t\t\t\t\terror={this.state.wrongPassword2 ? true : null}\n\t\t\t\t\t\t\t\t\t\t\thelperText={this.state.wrongPassword2}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid></>\n\t\t\t\t\t\t\t\t\t:null\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.root}>\n\t\t\t\t\t\t\t\t\t\t\t<p style={{ margin: '0', cursor: 'pointer', color: '#78818c' }} onClick={() => this.setState({ showMore: !this.state.showMore })}>Advanced settings</p>\n\t\t\t\t\t\t\t\t\t\t\t{/* <FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\t\tcontrol={<Switch checked={checked} onChange={handleChange} />}\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Show\"\n\t\t\t\t\t\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t\t\t\t\t\t<Collapse in={this.state.showMore}>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={<Switch checked={this.state.syncPrivKey} color=\"primary\" name=\"syncPrivKey\" onChange={this.handleInputChange} />}\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"switch_sync\")}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<p style={{ color: 'darkred', marginTop: '0' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t(\"warning_sync\")}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={<Switch checked={this.state.importPrivKey} color=\"primary\" name=\"importPrivKey\" onChange={this.handleInputChange} />}\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"switch_import\")}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Collapse in={this.state.importPrivKey}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ marginTop: '0.5rem' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"importedPrivKey\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"label_privkey\")}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"importedPrivKey\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.password}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terror={this.state.wrongPassword2 ? true : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thelperText={this.state.wrongPassword2}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnoValidate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</Collapse>\n\t\t\t\t\t\t\t\t\t\t\t</Collapse>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tcontrol={<Checkbox value=\"newsletter\" color=\"primary\" name=\"newsletter\" checked={this.state.newsletter} onChange={this.handleInputChange} />}\n\t\t\t\t\t\t\t\t\t\t\tlabel={t(\"checkbox_newsletter\")}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tcontrol={<Checkbox value=\"privacyPolicy\" color=\"primary\" name=\"privacyPolicy\" checked={this.state.privacyPolicy} onChange={this.handleInputChange} />}\n\t\t\t\t\t\t\t\t\t\t\tlabel={<span>{t(\"checkbox_privacy_0_5\")}<Link href=\"/privacy-policy.pdf\">{t(\"checkbox_privacy_1_5\")}</Link>{t(\"checkbox_privacy_2_5\")}<Link href=\"/NeoLogin-EndUserLicenseAgreement.pdf\">{t(\"checkbox_privacy_3_5\")}</Link>.</span>}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{this.state.privacyPolicy ? null :\n\t\t\t\t\t\t\t\t\t\t\t<FormHelperText error={true}>{t(\"helper_privacy\")}</FormHelperText>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t(\"button_singUp\")}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Typography component=\"p\">\n\t\t\t\t\t\t\t\t\t{t(\"info_registration\")}\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Grid container justify=\"flex-end\">\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<Link href=\"#\" variant=\"body2\" onClick={this.state.signInClick}>\n\t\t\t\t\t\t\t\t\t\t\t{t(\"link_signIn\")}\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</Container>\n\t\t);\n\t}\n}\n\nfunction validateEmail(email) {\n\tvar re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn re.test(String(email).toLowerCase());\n}\n\nfunction downloadFile(data) {\n\treturn fetch('data:text/plain;base64,' + window.btoa(data))\n\t\t.then(resp => resp.blob())\n\t\t.then(blob => {\n\t\t\tconst url = window.URL.createObjectURL(blob);\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.style.display = 'none';\n\t\t\ta.href = url;\n\t\t\t// the filename you want\n\t\t\ta.download = 'private-key.txt';\n\t\t\tdocument.body.appendChild(a);\n\t\t\ta.click();\n\t\t\twindow.URL.revokeObjectURL(url);\n\t\t})\n\t\t.catch(() => alert('Could not be downloaded, please copy paste the following string into a local file: ' + data));\n}\n\nfunction craftDownloadMessage(privkey) {\n\treturn \"This file contains your private key, which you will need in case you ever lose or forget your NeoLogin password.\\nThis file must be kept in a safe place and not shared with anyone else, as doing so will put your funds and wallet at risk of being stolen.\\nPrivate Key: \" + privkey;\n}\n\nSignUp.propTypes = {\n\tclasses: PropTypes.object.isRequired,\n};\n\nexport default withTranslation(\"signUp_form\")(withStyles(styles)(SignUp))\n","import React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport { withTranslation } from 'react-i18next';\n\nfunction VerifyEmail({ verifyCode, navigateBack, wrongEmailCode, t }) {\n\n  const [input, setInput] = useState('');\n\n  function handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    setInput(value)\n  }\n\n  return (\n    <>\n      <span style={{ fontSize: '2rem', marginBottom: '2rem' }}>{t(\"tittle\")}</span>\n      <TextField\n        variant=\"outlined\"\n        margin=\"normal\"\n        required\n        fullWidth\n        key=\"emailCode\"\n        id=\"emailCode\"\n        label={t(\"label_verificationCode\")}\n        name=\"emailCode\"\n        autoFocus\n        error={wrongEmailCode ? true : null}\n        helperText={wrongEmailCode ? t(\"helperWrongEmailCode\") : t(\"helperCode\")}\n        onChange={handleInputChange}\n      />\n<button className='buttonContinue' type=\"submit\" style={{ margin: '1rem 0' }} onClick={() => verifyCode(input)}>{t(\"button_verify\")}</button>\n      <button className='buttonContinue buttonBack' onClick={() => navigateBack()}>{t(\"button_goBack\")}</button>\n    </>\n  );\n}\n\nexport default withTranslation(\"verifyEmail\")(VerifyEmail)","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport QRCode from 'qrcode'\nimport { withTranslation } from 'react-i18next';\n\nfunction drawQR(secret, email) {\n  let canvas = document.getElementById('secretqr')\n  let code = \"otpauth://totp/NeoLogin:\" + email + \"?secret=\" + secret + \"&issuer=NeoLogin\";\n  QRCode.toCanvas(canvas, code, (error) => {\n    if (error) {\n      console.error(error);\n      alert(error);\n    } else {\n      //setTimeout(resolve, 100);\n    }\n  })\n}\n\nfunction TOTPQR({ secretTOTP, navigateBack, verifyCode, wrongMFACode, email, t }) {\n\n  const [input, setInput] = useState('');\n\n  function handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    setInput(value)\n  }\n\n  useEffect(() => drawQR(secretTOTP, email), [])\n\n  return (\n    <>\n      <span style={{ fontSize: '2rem', marginBottom: '2rem' }}>{t(\"tittle\")}</span>\n      <canvas id=\"secretqr\" />\n      <TextField\n        variant=\"outlined\"\n        margin=\"normal\"\n        required\n        fullWidth\n        key=\"MFACode\"\n        id=\"MFACode\"\n        label={t(\"label_totp\")}\n        name=\"MFACode\"\n        autoFocus\n        error={wrongMFACode ? true : null}\n        helperText={wrongMFACode ? t(\"helper_wrongMFA\") : \"Input the the time-based code from your authenticator App\"}\n        onChange={handleInputChange}\n      />\n      <button className='buttonContinue' type=\"submit\" style={{ margin: '1rem 0' }} onClick={() => verifyCode(input)}>{t(\"button_verify\")}</button>\n      <button className='buttonContinue buttonBack' onClick={() => navigateBack()}>{t(\"button_goBack\")}</button>\n    </ >\n  );\n}\n\nexport default withTranslation(\"TOTPQR\")(TOTPQR)","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport { withStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport PropTypes from 'prop-types';\nimport { disableTOTP, getUserData, updateUserData, downloadPrivKey, verifyEmail, enableTOTP } from './loginAPI';\nimport { withTranslation } from 'react-i18next';\nimport VerifyEmail from './Views/VerifyEmail'\nimport TOTPQR from './Views/TOTPQR'\n\nconst styles = (theme => ({\n\t'@global': {\n\t\tbody: {\n\t\t\tbackgroundColor: theme.palette.common.white,\n\t\t},\n\t},\n\tpaper: {\n\t\tmarginTop: '64px',\n\t\tmarginBottom: '40px',\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column'\n\t},\n\tavatar: {\n\t\tmargin: theme.spacing(1),\n\t\tbackgroundColor: theme.palette.secondary.main,\n\t},\n\tform: {\n\t\twidth: '100%', // Fix IE 11 issue.\n\t\tmarginTop: theme.spacing(1),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n\tsubtittle: {\n\t\tcolor: 'gray',\n\t\tmarginBottom: '0.4rem'\n\t},\n\tsettingItem: {\n\t\tmarginLeft: '1rem',\n\t\tmarginBottom: '0.4rem'\n\t}\n}));\n\n\nclass Settings extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tnewsletterChecked: false,\n\t\t\tverifyEmailView: false,\n\t\t\tverifyTOTPCodeView: false,\n\t\t\temailIsVerified: true,\n\t\t\temail: '',\n\t\t\tpreferredMFA: props.preferredMFA,\n\t\t\twrongMFACode: ''\n\t\t};\n\t}\n\n\thandleNewsletterChange = (event) => {\n\t\tconst target = event.target;\n\t\tconst value = target.type === 'checkbox' ? target.checked : target.value;\n\t\tconst name = target.name;\n\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t});\n\n\t\tupdateUserData(this.props.cognitoUser, 'custom:newsletter', value ? 'true' : 'false')\n\t}\n\n\tcomponentDidMount() {//todo save value emailisverified\n\t\tgetUserData(this.props.cognitoUser).then(data => this.setState({\n\t\t\tnewsletterChecked: data['custom:newsletter'] == 'true',\n\t\t\temailIsVerified: data.email_verified == 'true',\n\t\t\temial: data.email\n\t\t}))\n\t}\n\n\tverifyCodeEmail = (verificationCode) => {\n\t\tthis.props.cognitoUser.verifyAttribute('email', verificationCode, {\n\t\t\tonSuccess: (result) => {\n\t\t\t\tthis.setState({ verifyEmailView: false })\n\t\t\t},\n\t\t\tonFailure: (err) => {\n\t\t\t\tconsole.log(err)\n\t\t\t\tif (err.code === \"CodeMismatchException\" || err.code === \"InvalidParameterException\") {\n\t\t\t\t\tthis.setState({ wrongEmailCode: true });\n\t\t\t\t} else {\n\t\t\t\t\twindow.alert(err.message || JSON.stringify(err));\n\t\t\t\t}\n\t\t\t\tconsole.log('Code incorrect!!')\n\t\t\t}\n\t\t});\n\t}\n\n\tverifyCodeTOTP = (challengeAnswer) => {\n\t\tthis.props.cognitoUser.verifySoftwareToken(challengeAnswer, 'My TOTP device', {\n\t\t\tonSuccess: (result) => {\n\t\t\t\tconst totpMfaSettings = {\n\t\t\t\t\tPreferredMfa: true,\n\t\t\t\t\tEnabled: true\n\t\t\t\t};\n\t\t\t\tthis.props.cognitoUser.setUserMfaPreference(null, totpMfaSettings, (err, result) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\talert(err.message || JSON.stringify(err));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.setState({ verifyTOTPCodeView: false, preferredMFA: 'SOFTWARE_TOKEN_MFA' })\n\t\t\t\t});\n\t\t\t},\n\t\t\tonFailure: (err) => {\n\t\t\t\tif (err.code === \"EnableSoftwareTokenMFAException\" || err.code === \"InvalidParameterException\") {\n\t\t\t\t\tthis.setState({ wrongMFACode: true });\n\t\t\t\t} else {\n\t\t\t\t\twindow.alert(this.props.t(\"common:alert_session_expired\"));\n\t\t\t\t}\n\t\t\t\tconsole.log(err);\n\t\t\t},\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { classes, t } = this.props;\n\n\t\treturn (\n\t\t\t<Container component=\"main\" maxWidth=\"xs\">\n\t\t\t\t<CssBaseline />\n\t\t\t\t<div style={{\n\t\t\t\t\tmarginTop: '64px',\n\t\t\t\t\tmarginBottom: '40px',\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\talignItems: (!this.state.verifyEmailView && !this.state.verifyTOTPCodeView ? 'flex-start' : 'center')\n\t\t\t\t}}>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.verifyEmailView ? <VerifyEmail wrongEmailCode={this.state.wrongEmailCode} verifyCode={this.verifyCodeEmail} navigateBack={() => this.setState({ verifyEmailView: false })} /> :\n\t\t\t\t\t\t\tthis.state.verifyTOTPCodeView ? <TOTPQR email={this.state.email} wrongMFACode={this.state.wrongMFACode} navigateBack={() => this.setState({ verifyTOTPCodeView: false })} verifyCode={this.verifyCodeTOTP} secretTOTP={this.state.secretTOTP} /> :\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<span style={{\n\t\t\t\t\t\t\t\t\t\tfontSize: '2rem', marginBottom: '2rem', marginLeft: 'auto',\n\t\t\t\t\t\t\t\t\t\tmarginRight: 'auto'\n\t\t\t\t\t\t\t\t\t}}>{t(\"tittle\")}</span>\n\t\t\t\t\t\t\t\t\t<h4 className={classes.subtittle} style={{ marginBottom: '0rem' }}>{t(\"section_susbcribe\")}</h4>\n\t\t\t\t\t\t\t\t\t<FormControlLabel className={classes.settingItem} style={{ marginLeft: '0.4rem' }}\n\t\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t\t<Switch checked={this.state.newsletterChecked} onChange={this.handleNewsletterChange}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\" name=\"newsletterChecked\" />\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlabel={t(\"label_newsletter\")}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<h4 className={classes.subtittle}>{t(\"section_privket\")}</h4>\n\t\t\t\t\t\t\t\t\t<Button className={classes.settingItem} color='primary' variant=\"contained\" onClick={() => downloadPrivKey(this.props.privkey)}>{t(\"common:button_download\")}</Button>\n\t\t\t\t\t\t\t\t\t<h4 className={classes.subtittle}>{t(\"section_security\")}</h4>\n\t\t\t\t\t\t\t\t\t<Button className={classes.settingItem} color='primary' variant=\"contained\" disabled={this.state.emailIsVerified} onClick={() => {\n\t\t\t\t\t\t\t\t\t\tverifyEmail(this.props.cognitoUser).then(() => this.setState({ verifyEmailView: true, wrongEmailCode: false }))\n\t\t\t\t\t\t\t\t\t}}>{t(\"button_verifyEmail\")}</Button>\n\t\t\t\t\t\t\t\t\t<Button className={classes.settingItem} color='primary' variant=\"contained\" onClick={\n\t\t\t\t\t\t\t\t\t\t() => this.state.preferredMFA === 'SOFTWARE_TOKEN_MFA' ?\n\t\t\t\t\t\t\t\t\t\t\tdisableTOTP(this.props.cognitoUser).then(() => this.setState({ preferredMFA: '' }))\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\tenableTOTP(this.props.cognitoUser, this.state.email, (secret, email) =>\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ verifyTOTPCodeView: true, secretTOTP: secret, email: email, wrongMFACode: false }))\n\n\t\t\t\t\t\t\t\t\t}>{this.state.preferredMFA === 'SOFTWARE_TOKEN_MFA' ? t(\"button_enableTOTP\") : t(\"button_disableTOTP\")}</Button>\n\t\t\t\t\t\t\t\t\t<Button className={classes.settingItem} style={{ background: 'darkred' }} color='primary' variant=\"contained\" onClick={() => {\n\t\t\t\t\t\t\t\t\t\twindow.localStorage.removeItem('privkey')\n\t\t\t\t\t\t\t\t\t\twindow.close()\n\t\t\t\t\t\t\t\t\t}} >{t(\"button_logout\")}</Button>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</Container >\n\t\t);\n\t}\n}\n\nSettings.propTypes = {\n\tclasses: PropTypes.object.isRequired,\n};\n\nexport default withTranslation(\"settings\")(withStyles(styles)(Settings))\n","import React from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport logo from './logoboxtxt.png';\nimport { forgotPassword, updatePrivkey } from './loginAPI';\n\nconst styles = (theme => ({\n\t'@global': {\n\t\tbody: {\n\t\t\tbackgroundColor: theme.palette.common.white,\n\t\t},\n\t},\n\tpaper: {\n\t\tmarginTop: theme.spacing(8),\n\t\tmarginBottom: theme.spacing(5),\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\tavatar: {\n\t\tmargin: theme.spacing(1),\n\t\tbackgroundColor: '#2e5aac',\n\t},\n\tform: {\n\t\twidth: '100%', // Fix IE 11 issue.\n\t\tmarginTop: theme.spacing(1),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n}));\n\n\nclass LostPassword extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tgoBackClick: props.goBackClick,\n\t\t\twrongEmail: false,\n\t\t\twrongCode: false,\n\t\t\twrongPassword: false,\n\t\t\temail: \"\",\n\t\t\tpassword: \"\",\n\t\t\tcode: \"\",\n\t\t\tprivkey: \"\",\n\t\t\thandleLogin: props.handleLogin,\n\t\t\temailCompleted: false,\n\t\t\tcodeCompleted: false,\n\t\t\trecovered: false\n\t\t};\n\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\n\thandleInputChange(event) {\n\t\tconst target = event.target;\n\t\tconst value = target.type === 'checkbox' ? target.checked : target.value;\n\t\tconst name = target.name;\n\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t});\n\t}\n\n\tasync handleSubmit(event) {\n\t\tevent.preventDefault();\n\t\tif (!this.state.emailCompleted) {\n\t\t\t/*\n\t\t\tAuth.forgotPassword(this.state.email)\n\t\t\t\t.then(data => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\temailCompleted: true,\n\t\t\t\t\t\twrongEmail: false\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(data)\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twrongEmail: \"Email is not registered\"\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t});\n\t\t\t*/\n\t\t\tforgotPassword(this.state.email).then(cognitoUser => {\n\t\t\t\tthis.setState({\n\t\t\t\t\temailCompleted: true,\n\t\t\t\t\twrongEmail: false\n\t\t\t\t});\n\t\t\t\tthis.setState({ cognitoUser: cognitoUser })\n\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twrongEmail: this.props.t(\"wrongEmail\")\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t});\n\t\t} else {\n\t\t\tif (this.state.password.length <= 6) {\n\t\t\t\talert(\"Password is too weak\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.state.privkey <= 100) {\n\t\t\t\talert(\"Wrong privkey\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.state.cognitoUser.confirmPassword(this.state.code, this.state.password, {\n\t\t\t\tonSuccess: (result) => {\n\t\t\t\t\tthis.setState({ codeCompleted: true })\n\t\t\t\t\tupdatePrivkey(this.state.cognitoUser, this.state.password, this.state.privkey)\n\t\t\t\t},\n\t\t\t\tonFailure: (err) => {\n\t\t\t\t\talert(err.message);\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t}\n\t\t\t});\n\t\t\t/*\n\t\t\tAuth.forgotPasswordSubmit(this.state.email, this.state.code, this.state.password)\n\t\t\t\t.then(async data => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcodeCompleted: true\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(data)\n\n\t\t\t\t\ttry{\n\t\t\t\t\t\tconst user = await Auth.signIn(this.state.email, this.state.password);\n\t\t\t\t\t\tif (user.challengeName === 'SMS_MFA' ||\n\t\t\t\t\t\t\tuser.challengeName === 'SOFTWARE_TOKEN_MFA') {\n\t\t\t\t\t\t\tconst code = prompt(\"Enter \"+user.challengeName+\" code:\");\n\t\t\t\t\t\t\tconst loggedUser = await Auth.confirmSignIn(\n\t\t\t\t\t\t\t\tuser,   // Return object from Auth.signIn()\n\t\t\t\t\t\t\t\tcode,   // Confirmation code\n\t\t\t\t\t\t\t\tuser.challengeName // MFA Type e.g. SMS_MFA, SOFTWARE_TOKEN_MFA\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tupdatePrivkey(loggedUser, this.state.privkey, this.state.password);\n\t\t\t\t\t\t} else if (user.challengeName === 'NEW_PASSWORD_REQUIRED') {\n\t\t\t\t\t\t} else if (user.challengeName === 'MFA_SETUP') {\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdatePrivkey(user, this.state.privkey, this.state.password);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\talert(\"An error has ocurred, please contact support@neologin.io and provide them with the following report:\\n\"+JSON.stringify(err))\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twrongCode: \"Wrong code\"\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t});\n\t\t\t*/\n\t\t}\n\t}\n\n\trender() {\n\t\tlet body = null;\n\t\tconst { t, classes } = this.props\n\t\tif (!this.state.emailCompleted) {\n\t\t\tbody = <div>\n\t\t\t\t<TextField\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\trequired\n\t\t\t\t\tfullWidth\n\t\t\t\t\tid=\"email\"\n\t\t\t\t\tlabel={t(\"label_email\")}\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\tvalue={this.state.email}\n\t\t\t\t\tautoFocus\n\t\t\t\t\terror={this.state.wrongEmail ? true : null}\n\t\t\t\t\thelperText={this.state.wrongEmail}\n\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t} else {\n\t\t\tbody = <div>\n\t\t\t\t<TextField\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\trequired\n\t\t\t\t\tfullWidth\n\t\t\t\t\tid=\"code\"\n\t\t\t\t\tlabel={t(\"label_code\")}\n\t\t\t\t\tname=\"code\"\n\t\t\t\t\tautoFocus\n\t\t\t\t\tvalue={this.state.code}\n\t\t\t\t\terror={this.state.wrongCode ? true : null}\n\t\t\t\t\thelperText={this.state.wrongCode ? this.state.wrongCode : t(\"helper_code\")}\n\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t/>\n\t\t\t\t<TextField\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\trequired\n\t\t\t\t\tfullWidth\n\t\t\t\t\tid=\"privkey\"\n\t\t\t\t\tlabel={t(\"label_privKey\")}\n\t\t\t\t\tname=\"privkey\"\n\t\t\t\t\tautoFocus\n\t\t\t\t\tvalue={this.state.privkey}\n\t\t\t\t\thelperText={t(\"helper_privKey\")}\n\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t/>\n\t\t\t\t<TextField\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\trequired\n\t\t\t\t\tfullWidth\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tlabel={t(\"label_newPassword\")}\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tid=\"password\"\n\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\tvalue={this.state.password}\n\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t}\n\n\t\tconst goBackButton = <button className='buttonContinue buttonBack' onClick={this.state.goBackClick}>\n\t\t\t{t(\"button_goBack\")}\n\t\t</button>\n\n\t\treturn (\n\t\t\t<Container component=\"main\" maxWidth=\"xs\">\n\t\t\t\t<CssBaseline />\n\t\t\t\t<div className={classes.paper}>\n\t\t\t\t\t<img src={logo} style={{ height: '5em', marginBottom: '5em' }} />\n\t\t\t\t\t<Typography component=\"h1\" variant=\"h5\" style={{ color: '#6A737D' }}>\n\t\t\t\t\t\t{t(\"link_resetPassword\")}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t{this.state.codeCompleted ?\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Typography component=\"h2\" variant=\"h5\">\n\t\t\t\t\t\t\t\t{t(\"info_resetOk\")}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t{goBackButton}\n\t\t\t\t\t\t</div> :\n\t\t\t\t\t\t<form className={classes.form} onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t\t{body}\n\t\t\t\t\t\t\t<button className='buttonContinue' type=\"submit\" style={{ margin: '0.5rem 0' }}>\n\t\t\t\t\t\t\t\t{t(\"button_resetPassword\")}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{goBackButton}\n\t\t\t\t\t\t</form>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</Container>\n\t\t);\n\t}\n}\n\nLostPassword.propTypes = {\n\tclasses: PropTypes.object.isRequired,\n};\n\nexport default withTranslation(\"lostPassword\")(withStyles(styles)(LostPassword))\n","export const server = \"https://neologin.io\";\n","import React from 'react';\nimport './App.css';\nimport SignIn from './SignIn';\nimport SignUp from './SignUp';\nimport Settings from './Settings';\nimport LostPassword from './LostPassword';\nimport { server } from './config';\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tif (!server.includes(\"localhost\") && (!window.opener || !window.opener.location || (window.opener.location.href !== server + \"/widget/\" && window.opener.location.href !== server + \"/wallet/\"))) {\n\t\t\t//Trying to hack the user\n\t\t\twindow.close();\n\t\t\tthis.state = {\n\t\t\t\tloginScreen: false,\n\t\t\t\ttwoFAScreen: false,\n\t\t\t\tregisterScreen: false,\n\t\t\t\tlostPasswordScreen: false,\n\t\t\t};\n\t\t} else {\n\t\t\tthis.state = {\n\t\t\t\tloginScreen: true,\n\t\t\t\ttwoFAScreen: false,\n\t\t\t\tregisterScreen: false,\n\t\t\t\tlostPasswordScreen: false,\n\t\t\t\topenSettings: false,\n\t\t\t\tpreferredMFA: '',\n\t\t\t};\n\t\t}\n\n\t\tthis.handleLogin = this.handleLogin.bind(this)\n\t}\n\n\thandleLogin(privkey, rememberMe, cognitoUser, preferredMFA) {\n\t\tvar url_string = window.location.href\n\t\tvar url = new URL(url_string);\n\t\tvar settings = url.searchParams.get(\"settings\");\n\t\tif (settings && settings.includes(\"true\")) {\n\t\t\tthis.setState({ settings: true, cognitoUser: cognitoUser, privkey: privkey, preferredMFA: preferredMFA })\n\t\t}\n\t\telse {\n\t\t\twindow.opener.postMessage({ privkey, rememberMe }, server);\n\t\t\twindow.close();\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.state.settings) {\n\t\t\treturn <Settings\n\t\t\t\tsignUpClick={() => this.setState({\n\t\t\t\t\tregisterScreen: true,\n\t\t\t\t\tloginScreen: false,\n\t\t\t\t})}\n\t\t\t\tpasswordLostClick={() => this.setState({\n\t\t\t\t\tlostPasswordScreen: true,\n\t\t\t\t\tloginScreen: false,\n\t\t\t\t})}\n\t\t\t\thandleLogin={this.handleLogin}\n\t\t\t\tcognitoUser={this.state.cognitoUser}\n\t\t\t\tprivkey={this.state.privkey}\n\t\t\t\tpreferredMFA={this.state.preferredMFA}\n\t\t\t/>;\n\t\t}\n\t\tif (this.state.loginScreen) {\n\t\t\treturn <SignIn\n\t\t\t\tsignUpClick={() => this.setState({\n\t\t\t\t\tregisterScreen: true,\n\t\t\t\t\tloginScreen: false,\n\t\t\t\t})}\n\t\t\t\tpasswordLostClick={() => this.setState({\n\t\t\t\t\tlostPasswordScreen: true,\n\t\t\t\t\tloginScreen: false,\n\t\t\t\t})}\n\t\t\t\thandleLogin={this.handleLogin}\n\t\t\t/>;\n\t\t}\n\t\tif (this.state.lostPasswordScreen) {\n\t\t\treturn <LostPassword\n\t\t\t\tgoBackClick={() => this.setState({\n\t\t\t\t\tlostPasswordScreen: false,\n\t\t\t\t\tloginScreen: true,\n\t\t\t\t})}\n\t\t\t\tcognitoUser={this.state.cognitoUser}\n\t\t\t\thandleLogin={this.handleLogin}\n\t\t\t/>;\n\t\t}\n\t\tif (this.state.registerScreen) {\n\t\t\treturn <SignUp\n\t\t\t\tsignInClick={() => this.setState({\n\t\t\t\t\tregisterScreen: false,\n\t\t\t\t\tloginScreen: true,\n\t\t\t\t})}\n\t\t\t\thandleLogin={this.handleLogin}\n\t\t\t/>;\n\t\t}\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport \"./translations/i18n\";\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/logoboxtxt.6289c5bb.png\";"],"sourceRoot":""}